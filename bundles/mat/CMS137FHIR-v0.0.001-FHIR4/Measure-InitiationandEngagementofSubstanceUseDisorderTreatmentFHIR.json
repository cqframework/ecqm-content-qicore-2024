{
  "resourceType": "Measure",
  "id": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR",
  "meta": {
    "profile": [ "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/computable-measure-cqfm", "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/publishable-measure-cqfm", "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/executable-measure-cqfm" ]
  },
  "contained": [ {
    "resourceType": "Library",
    "id": "effective-data-requirements",
    "extension": [ {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://snomed.info/sct",
        "code": "428361000124107",
        "display": "Discharge to home for hospice care (procedure)"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://snomed.info/sct",
        "code": "428371000124100",
        "display": "Discharge to healthcare facility for hospice care (procedure)"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://terminology.hl7.org/CodeSystem/observation-category",
        "code": "survey",
        "display": "survey"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://loinc.org",
        "code": "45755-6",
        "display": "Hospice care [Minimum Data Set]"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode",
      "valueCoding": {
        "system": "http://snomed.info/sct",
        "code": "373066001",
        "display": "Yes (qualifier value)"
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Stratification 3"
      }, {
        "url": "statement",
        "valueString": "define &quot;Stratification 3&quot;:\n  AgeInYearsAt(date from start of &quot;Measurement Period&quot;) &gt;= 65"
      }, {
        "url": "displaySequence",
        "valueString": "0"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Stratification 2"
      }, {
        "url": "statement",
        "valueString": "define &quot;Stratification 2&quot;:\n  AgeInYearsAt(date from start of &quot;Measurement Period&quot;) in Interval[18, 64]"
      }, {
        "url": "displaySequence",
        "valueString": "1"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Stratification 1"
      }, {
        "url": "statement",
        "valueString": "define &quot;Stratification 1&quot;:\n  AgeInYearsAt(date from start of &quot;Measurement Period&quot;) in Interval[13, 17]"
      }, {
        "url": "displaySequence",
        "valueString": "2"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Qualifying Encounters"
      }, {
        "url": "statement",
        "valueString": "define &quot;Qualifying Encounters&quot;:\n  ( [Encounter: &quot;Office Visit&quot;]\n      union [Encounter: &quot;Emergency Department Visit&quot;]\n      union [Encounter: &quot;Detoxification Visit&quot;]\n      union [Encounter: &quot;Initial Hospital Observation Care&quot;]\n      union [Encounter: &quot;Initial Hospital Inpatient Visit&quot;]\n      union [Encounter: &quot;Discharge Services Hospital Inpatient Same Day Discharge&quot;]\n      union [Encounter: &quot;Discharge Services Hospital Inpatient&quot;]\n      union [Encounter: &quot;Telephone Visits&quot;]\n      union [Encounter: &quot;Online Assessments&quot;]\n  ).isEncounterPerformed ( )"
      }, {
        "url": "displaySequence",
        "valueString": "3"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "First SUD Episode During Measurement Period"
      }, {
        "url": "statement",
        "valueString": "define &quot;First SUD Episode During Measurement Period&quot;:\n  First((&quot;Qualifying Encounters&quot;) ValidEncounters\n      with [Condition: &quot;Substance Use Disorder&quot;] SUDDiagnosis\n        such that ValidEncounters.period.toInterval() during &quot;Measurement Period&quot;\n          and SUDDiagnosis.prevalenceInterval() starts during ValidEncounters.period.toInterval()\n          and SUDDiagnosis.prevalenceInterval() starts 47 days or more before day of \n          end of &quot;Measurement Period&quot;\n      return {\n        ValidEncounterDate: date from start of ValidEncounters.period.toInterval(),\n        ValidEncounter: ValidEncounters\n      }\n      sort by ValidEncounterDate\n  ).ValidEncounter"
      }, {
        "url": "displaySequence",
        "valueString": "4"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Emergency Department or Detoxification Visit"
      }, {
        "url": "statement",
        "valueString": "define &quot;Emergency Department or Detoxification Visit&quot;:\n  ( [Encounter: &quot;Emergency Department Visit&quot;]\n      union [Encounter: &quot;Detoxification Visit&quot;]\n  ).isEncounterPerformed ( )"
      }, {
        "url": "displaySequence",
        "valueString": "5"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "History of SUD Diagnosis or Treatment"
      }, {
        "url": "statement",
        "valueString": "define &quot;History of SUD Diagnosis or Treatment&quot;:\n  ( ( ( [Procedure: &quot;Substance Use Disorder Treatment&quot;]\n        union [Procedure: &quot;Psych Visit Psychotherapy&quot;]\n        union [Procedure: &quot;Substance Use Disorder Long Acting Medication Administration&quot;]\n        union [Procedure: &quot;Substance Use Disorder Short Acting Medication Administration&quot;]\n    ).isProcedurePerformed ( ) ) Interventions\n      with &quot;First SUD Episode During Measurement Period&quot; FirstSUDEpisode\n        such that Interventions.performed.toInterval ( ) starts 60 days or less before day of date from start of FirstSUDEpisode.period.toInterval ( )\n  )\n    union ( ( ( ( &quot;Qualifying Encounters&quot;\n          except &quot;Emergency Department or Detoxification Visit&quot; ) QualifyingEncounter\n          where exists ( ( QualifyingEncounter.encounterDiagnosis ( ) ) SUDDiagnosis\n              where SUDDiagnosis.code in &quot;Substance Use Disorder&quot;\n          )\n      ) ) SUDEncounterDx\n        with &quot;First SUD Episode During Measurement Period&quot; FirstSUDEpisode\n          such that SUDEncounterDx.period.toInterval ( ) starts 60 days or less before day of date from start of FirstSUDEpisode.period.toInterval ( )\n    )\n    union ( ( Status.&quot;Active or Completed Medication Request&quot; ( [&quot;MedicationRequest&quot;: &quot;Substance Use Disorder Long Acting Medication&quot;]\n        union [MedicationRequest: &quot;Substance Use Disorder Short Acting Medication&quot;] ) ) SUDMedication\n        with &quot;First SUD Episode During Measurement Period&quot; FirstSUDEpisode\n          such that SUDMedication.authoredOn.toInterval ( ) 60 days or less before day of date from start of FirstSUDEpisode.period.toInterval ( )\n    )"
      }, {
        "url": "displaySequence",
        "valueString": "6"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Initial Population"
      }, {
        "url": "statement",
        "valueString": "define &quot;Initial Population&quot;:\n  AgeInYearsAt(date from start of &quot;Measurement Period&quot;) &gt;= 13\n    and &quot;First SUD Episode During Measurement Period&quot; is not null\n    and not exists &quot;History of SUD Diagnosis or Treatment&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "7"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Denominator"
      }, {
        "url": "statement",
        "valueString": "define &quot;Denominator&quot;:\n  &quot;Initial Population&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "8"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Psychosocial Visit"
      }, {
        "url": "statement",
        "valueString": "define &quot;Psychosocial Visit&quot;:\n  ( ( ( [Procedure: &quot;Substance Use Disorder Treatment&quot;]\n        union [Procedure: &quot;Psych Visit Psychotherapy&quot;]\n    ).isProcedurePerformed ( )\n  )\n    union ( ( [Encounter: &quot;Telephone Visits&quot;]\n        union [Encounter: &quot;Online Assessments&quot;]\n    ).isEncounterPerformed ( ) ) TelehealthEncounter\n      where exists ( ( TelehealthEncounter.encounterDiagnosis ( ) ) SUDDiagnosis\n          where SUDDiagnosis.code in &quot;Substance Use Disorder&quot;\n      ) ) SUDEncounterDx"
      }, {
        "url": "displaySequence",
        "valueString": "9"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Treatment Initiation With Non Medication Intervention Dates"
      }, {
        "url": "statement",
        "valueString": "define &quot;Treatment Initiation With Non Medication Intervention Dates&quot;:\n  &quot;Psychosocial Visit&quot; PsychosocialVisit\n    let treatmentDate: date from start of PsychosocialVisit.period.toInterval ( )\n    with &quot;First SUD Episode During Measurement Period&quot; FirstSUDEpisode\n      such that treatmentDate during Interval[date from start of FirstSUDEpisode.period.toInterval ( ), date from start of FirstSUDEpisode.period.toInterval ( ) + 14 days )\n        and PsychosocialVisit.id !~ FirstSUDEpisode.id\n    return all treatmentDate"
      }, {
        "url": "displaySequence",
        "valueString": "10"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Treatment Initiation With Medication Order Dates"
      }, {
        "url": "statement",
        "valueString": "define &quot;Treatment Initiation With Medication Order Dates&quot;:\n  ( ( [MedicationRequest: &quot;Substance Use Disorder Short Acting Medication&quot;]\n      union [MedicationRequest: &quot;Substance Use Disorder Long Acting Medication&quot;] ) SUDMedication\n      let treatmentDate: date from start of SUDMedication.authoredOn.toInterval ( )\n      with &quot;First SUD Episode During Measurement Period&quot; FirstSUDEpisode\n        such that treatmentDate during Interval[date from start of FirstSUDEpisode.period.toInterval ( ), date from start of FirstSUDEpisode.period.toInterval ( ) + 14 days )\n      return all treatmentDate\n  )\n    union ( ( ( [Procedure: &quot;Substance Use Disorder Short Acting Medication Administration&quot;]\n          union [Procedure: &quot;Substance Use Disorder Long Acting Medication Administration&quot;]\n      ).isProcedurePerformed ( ) ) SUDMedAdministration\n        let treatmentDate: date from start of SUDMedAdministration.performed.toInterval ( )\n        with &quot;First SUD Episode During Measurement Period&quot; FirstSUDEpisode\n          such that treatmentDate during Interval[date from start of FirstSUDEpisode.period.toInterval ( ), date from start of FirstSUDEpisode.period.toInterval ( ) + 14 days )\n        return all treatmentDate\n    )"
      }, {
        "url": "displaySequence",
        "valueString": "11"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Numerator 1"
      }, {
        "url": "statement",
        "valueString": "define &quot;Numerator 1&quot;:\n  exists &quot;Treatment Initiation With Non Medication Intervention Dates&quot;\n    or exists &quot;Treatment Initiation With Medication Order Dates&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "12"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Has Treatment Engagement With Long Acting Medication"
      }, {
        "url": "statement",
        "valueString": "define &quot;Has Treatment Engagement With Long Acting Medication&quot;:\n  exists ( ( [MedicationRequest: &quot;Substance Use Disorder Long Acting Medication&quot;] LongActingMedOrder\n        with ( Min(&quot;Treatment Initiation With Non Medication Intervention Dates&quot;\n            union &quot;Treatment Initiation With Medication Order Dates&quot;\n        ) ) InitiationTreatmentDate\n          such that date from start of LongActingMedOrder.authoredOn.toInterval ( ) 34 days or less after InitiationTreatmentDate\n    )\n      union ( ( ( [Procedure: &quot;Substance Use Disorder Long Acting Medication Administration&quot;] ).isProcedurePerformed ( ) ) LongActingTreatment\n          with ( Min(&quot;Treatment Initiation With Non Medication Intervention Dates&quot;\n              union &quot;Treatment Initiation With Medication Order Dates&quot;\n          ) ) InitiationTreatmentDate\n            such that date from start of LongActingTreatment.performed.toInterval ( ) 34 days or less after InitiationTreatmentDate\n      )\n  )"
      }, {
        "url": "displaySequence",
        "valueString": "13"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention"
      }, {
        "url": "statement",
        "valueString": "define &quot;Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention&quot;:\n  Count(((&quot;Psychosocial Visit&quot;\n        union(([Procedure: &quot;Substance Use Disorder Short Acting Medication Administration&quot;]).isProcedurePerformed())) ShortActingTreatment\n        with(Min(&quot;Treatment Initiation With Non Medication Intervention Dates&quot;\n            union &quot;Treatment Initiation With Medication Order Dates&quot;\n        )) InitiationTreatmentDate\n          such that date from start of ShortActingTreatment.performed.toInterval() 34 days or less after InitiationTreatmentDate\n            or date from start of ShortActingTreatment.period.toInterval() 34 days or less after InitiationTreatmentDate\n        return all ShortActingTreatment\n    )\n      union([MedicationRequest: &quot;Substance Use Disorder Short Acting Medication&quot;] ShortActingMedOrder\n          with(Min(&quot;Treatment Initiation With Non Medication Intervention Dates&quot;\n              union &quot;Treatment Initiation With Medication Order Dates&quot;\n          )) InitiationTreatmentDate\n            such that date from start of ShortActingMedOrder.authoredOn.toInterval() 34 days or less after InitiationTreatmentDate\n          return all ShortActingMedOrder\n      )\n  ) &gt;= 2"
      }, {
        "url": "displaySequence",
        "valueString": "14"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Numerator 2"
      }, {
        "url": "statement",
        "valueString": "define &quot;Numerator 2&quot;:\n  &quot;Has Treatment Engagement With Long Acting Medication&quot;\n    or &quot;Has Two or More Treatment Engagements With Short Acting Medication or Non Medication Intervention&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "15"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "Hospice"
      }, {
        "url": "name",
        "valueString": "Has Hospice Services"
      }, {
        "url": "statement",
        "valueString": "define &quot;Has Hospice Services&quot;:\n  exists ((([Encounter: &quot;Encounter Inpatient&quot;]).isEncounterPerformed()) InpatientEncounter\n      where (InpatientEncounter.hospitalization.dischargeDisposition ~ &quot;Discharge to home for hospice care (procedure)&quot;\n          or InpatientEncounter.hospitalization.dischargeDisposition ~ &quot;Discharge to healthcare facility for hospice care (procedure)&quot;\n      )\n        and InpatientEncounter.period.toInterval() ends during day of &quot;Measurement Period&quot;\n  )\n    or exists ((([Encounter: &quot;Hospice Encounter&quot;]).isEncounterPerformed()) HospiceEncounter\n        where HospiceEncounter.period.toInterval() overlaps day of &quot;Measurement Period&quot;\n    )\n    or exists ((([Observation: &quot;Hospice care [Minimum Data Set]&quot;]).isAssessmentPerformed()) HospiceAssessment\n        where HospiceAssessment.value ~ &quot;Yes (qualifier value)&quot;\n          and HospiceAssessment.effective.toInterval() overlaps day of &quot;Measurement Period&quot;\n    )\n    or exists ((([ServiceRequest: &quot;Hospice Care Ambulatory&quot;]).isInterventionOrder()) HospiceOrder\n        where HospiceOrder.authoredOn.toInterval() during day of &quot;Measurement Period&quot;\n    )\n    or exists ((([Procedure: &quot;Hospice Care Ambulatory&quot;]).isInterventionPerformed()) HospicePerformed\n        where HospicePerformed.performed.toInterval() overlaps day of &quot;Measurement Period&quot;\n    )\n    or exists (([Condition: &quot;Hospice Diagnosis&quot;]) HospiceCareDiagnosis\n        where HospiceCareDiagnosis.prevalenceInterval() overlaps day of &quot;Measurement Period&quot;\n    )"
      }, {
        "url": "displaySequence",
        "valueString": "16"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR"
      }, {
        "url": "name",
        "valueString": "Denominator Exclusions"
      }, {
        "url": "statement",
        "valueString": "define &quot;Denominator Exclusions&quot;:\n  Hospice.&quot;Has Hospice Services&quot;"
      }, {
        "url": "displaySequence",
        "valueString": "17"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "Status"
      }, {
        "url": "name",
        "valueString": "isEncounterPerformed"
      }, {
        "url": "statement",
        "valueString": "define fluent function isEncounterPerformed(Enc List&lt;Encounter&gt;):\n  Enc E\n    where E.status in {&#39;finished&#39;, &#39;arrived&#39;, &#39;triaged&#39;, &#39;in-progress&#39;, &#39;onleave&#39;}"
      }, {
        "url": "displaySequence",
        "valueString": "18"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "QICoreCommon"
      }, {
        "url": "name",
        "valueString": "toInterval"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Normalizes a value that is a choice of timing-valued types to an equivalent interval\n@comment: Normalizes a choice type of DateTime, Quanitty, Interval&lt;DateTime&gt;, or Interval&lt;Quantity&gt; types\nto an equivalent interval. This selection of choice types is a superset of the majority of choice types that are used as possible\nrepresentations for timing-valued elements in QICore, allowing this function to be used across any resource.\nThe input can be provided as a DateTime, Quantity, Interval&lt;DateTime&gt; or Interval&lt;Quantity&gt;.\nThe intent of this function is to provide a clear and concise mechanism to treat single\nelements that have multiple possible representations as intervals so that logic doesn&#39;t have to account\nfor the variability. More complex calculations (such as medication request period or dispense period\ncalculation) need specific guidance and consideration. That guidance may make use of this function, but\nthe focus of this function is on single element calculations where the semantics are unambiguous.\nIf the input is a DateTime, the result a DateTime Interval beginning and ending on that DateTime.\nIf the input is a Quantity, the quantity is expected to be a calendar-duration interpreted as an Age,\nand the result is a DateTime Interval beginning on the Date the patient turned that age and ending immediately before one year later.\nIf the input is a DateTime Interval, the result is the input.\nIf the input is a Quantity Interval, the quantities are expected to be calendar-durations interpreted as an Age, and the result\nis a DateTime Interval beginning on the date the patient turned the age given as the start of the quantity interval, and ending\nimmediately before one year later than the date the patient turned the age given as the end of the quantity interval.\nIf the input is a Timing, an error will be thrown indicating that Timing calculations are not implemented. Any other input will reslt in a null DateTime Interval\n*/\ndefine fluent function toInterval(choice Choice&lt;DateTime, Quantity, Interval&lt;DateTime&gt;, Interval&lt;Quantity&gt;, Timing&gt;):\n  case\n\t  when choice is DateTime then\n    \tInterval[choice as DateTime, choice as DateTime]\n\t\twhen choice is Interval&lt;DateTime&gt; then\n  \t\tchoice as Interval&lt;DateTime&gt;\n\t\twhen choice is Quantity then\n\t\t  Interval[Patient.birthDate + (choice as Quantity),\n\t\t\t  Patient.birthDate + (choice as Quantity) + 1 year)\n\t\twhen choice is Interval&lt;Quantity&gt; then\n\t\t  Interval[Patient.birthDate + (choice.low as Quantity),\n\t\t\t  Patient.birthDate + (choice.high as Quantity) + 1 year)\n\t\twhen choice is Timing then\n      Message(null, true, &#39;NOT_IMPLEMENTED&#39;, &#39;Error&#39;, &#39;Calculation of an interval from a Timing value is not supported&#39;) as Interval&lt;DateTime&gt;\n\t\telse\n\t\t\tnull as Interval&lt;DateTime&gt;\n\tend"
      }, {
        "url": "displaySequence",
        "valueString": "19"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "QICoreCommon"
      }, {
        "url": "name",
        "valueString": "prevalenceInterval"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Returns an interval representing the normalized prevalence period of a given Condition.\n@comment: Uses the ToInterval and ToAbatementInterval functions to determine the widest potential interval from\nonset to abatement as specified in the given Condition. If the condition is active, or has an abatement date the resulting \ninterval will have a closed ending boundary. Otherwise, the resulting interval will have an open ending boundary.\n*/\ndefine fluent function prevalenceInterval(condition Condition):\nif condition.clinicalStatus ~ &quot;active&quot;\n  or condition.clinicalStatus ~ &quot;recurrence&quot;\n  or condition.clinicalStatus ~ &quot;relapse&quot; then\n  Interval[start of condition.onset.toInterval(), end of condition.abatementInterval()]\nelse\n    (end of ToAbatementInterval(condition)) abatementDate\n    return if abatementDate is null then\n      Interval[start of ToInterval(condition.onset), abatementDate)\n    else\n      Interval[start of ToInterval(condition.onset), abatementDate]"
      }, {
        "url": "displaySequence",
        "valueString": "20"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "Status"
      }, {
        "url": "name",
        "valueString": "isProcedurePerformed"
      }, {
        "url": "statement",
        "valueString": "define fluent function isProcedurePerformed(Proc List&lt;Procedure&gt;):\n  Proc P\n    where P.status ~ &#39;completed&#39;"
      }, {
        "url": "displaySequence",
        "valueString": "21"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "CQMCommon"
      }, {
        "url": "name",
        "valueString": "encounterDiagnosis"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Returns the Condition resources referenced by the diagnosis element of the Encounter\n*/\ndefine fluent function encounterDiagnosis(Encounter Encounter ):\n  Encounter.diagnosis D\n    return singleton from ([Condition] C where C.id = D.condition.reference.getId())"
      }, {
        "url": "displaySequence",
        "valueString": "22"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "QICoreCommon"
      }, {
        "url": "name",
        "valueString": "getId"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Returns the tail of the given uri (i.e. everything after the last slash in the URI).\n@comment: This function can be used to determine the logical id of a given resource. It can be used in\na single-server environment to trace references. However, this function does not attempt to resolve\nor distinguish the base of the given url, and so cannot be used safely in multi-server environments.\n*/\ndefine fluent function getId(uri String):\n  Last(Split(uri, &#39;/&#39;))"
      }, {
        "url": "displaySequence",
        "valueString": "23"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "Status"
      }, {
        "url": "name",
        "valueString": "Active or Completed Medication Request"
      }, {
        "url": "statement",
        "valueString": "//Medication, Order: active and completed only\ndefine function &quot;Active or Completed Medication Request&quot;(MedicationRequest List&lt;MedicationRequest&gt;):\n  MedicationRequest M\n    where M.status in { &#39;active&#39;, &#39;completed&#39; }\n      and M.intent = &#39;order&#39;"
      }, {
        "url": "displaySequence",
        "valueString": "24"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "Status"
      }, {
        "url": "name",
        "valueString": "isAssessmentPerformed"
      }, {
        "url": "statement",
        "valueString": "//Similar but different from QICoreCommon.isSurvey, which does not have status constraints\ndefine fluent function isAssessmentPerformed(Obs List&lt;Observation&gt;):\n  Obs O\n    where O.status in { &#39;final&#39;, &#39;amended&#39;, &#39;corrected&#39; }\n          and exists ( O.category ObservationCategory\n          where ( ObservationCategory ) ~ &quot;survey&quot;\n      )"
      }, {
        "url": "displaySequence",
        "valueString": "25"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "FHIRHelpers"
      }, {
        "url": "name",
        "valueString": "ToConcept"
      }, {
        "url": "statement",
        "valueString": "/*\n@description: Converts the given FHIR [CodeableConcept](https://hl7.org/fhir/datatypes.html#CodeableConcept) value to a CQL Concept.\n*/\ndefine function ToConcept(concept FHIR.CodeableConcept):\n    if concept is null then\n        null\n    else\n        System.Concept {\n            codes: concept.coding C return ToCode(C),\n            display: concept.text.value\n        }"
      }, {
        "url": "displaySequence",
        "valueString": "26"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "Status"
      }, {
        "url": "name",
        "valueString": "isInterventionOrder"
      }, {
        "url": "statement",
        "valueString": "define fluent function isInterventionOrder(ServiceRequest List&lt;ServiceRequest&gt;):\n  ServiceRequest S\n    where S.status in { &#39;active&#39;, &#39;completed&#39; }\n      and S.intent = &#39;order&#39;"
      }, {
        "url": "displaySequence",
        "valueString": "27"
      } ]
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition",
      "extension": [ {
        "url": "libraryName",
        "valueString": "Status"
      }, {
        "url": "name",
        "valueString": "isInterventionPerformed"
      }, {
        "url": "statement",
        "valueString": "define fluent function isInterventionPerformed(Proc List&lt;Procedure&gt;):\n  Proc P\n    where P.status ~ &#39;completed&#39;"
      }, {
        "url": "displaySequence",
        "valueString": "28"
      } ]
    } ],
    "status": "active",
    "type": {
      "coding": [ {
        "system": "http://terminology.hl7.org/CodeSystem/library-type",
        "code": "module-definition"
      } ]
    },
    "relatedArtifact": [ {
      "type": "depends-on",
      "display": "Library Status",
      "resource": "Library/Status|1.6.000"
    }, {
      "type": "depends-on",
      "display": "Library QICoreCommon",
      "resource": "Library/QICoreCommon|2.0.000"
    }, {
      "type": "depends-on",
      "display": "Library FHIRHelpers",
      "resource": "Library/FHIRHelpers|4.3.000"
    }, {
      "type": "depends-on",
      "display": "Library CQMCommon",
      "resource": "Library/CQMCommon|2.0.000"
    }, {
      "type": "depends-on",
      "display": "Library Hospice",
      "resource": "Library/Hospice|6.9.000"
    }, {
      "type": "depends-on",
      "display": "Code system SNOMEDCT",
      "resource": "http://snomed.info/sct"
    }, {
      "type": "depends-on",
      "display": "Code system ObservationCategoryCodes",
      "resource": "http://terminology.hl7.org/CodeSystem/observation-category"
    }, {
      "type": "depends-on",
      "display": "Code system LOINC",
      "resource": "http://loinc.org"
    }, {
      "type": "depends-on",
      "display": "Value set Office Visit",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001"
    }, {
      "type": "depends-on",
      "display": "Value set Emergency Department Visit",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1010"
    }, {
      "type": "depends-on",
      "display": "Value set Detoxification Visit",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1059"
    }, {
      "type": "depends-on",
      "display": "Value set Initial Hospital Observation Care",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1002"
    }, {
      "type": "depends-on",
      "display": "Value set Initial Hospital Inpatient Visit",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1004"
    }, {
      "type": "depends-on",
      "display": "Value set Discharge Services Hospital Inpatient Same Day Discharge",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1006"
    }, {
      "type": "depends-on",
      "display": "Value set Discharge Services Hospital Inpatient",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1007"
    }, {
      "type": "depends-on",
      "display": "Value set Telephone Visits",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1080"
    }, {
      "type": "depends-on",
      "display": "Value set Online Assessments",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1089"
    }, {
      "type": "depends-on",
      "display": "Value set Substance Use Disorder",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.106.12.1001"
    }, {
      "type": "depends-on",
      "display": "Value set Substance Use Disorder Treatment",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.106.12.1005"
    }, {
      "type": "depends-on",
      "display": "Value set Psych Visit Psychotherapy",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1496"
    }, {
      "type": "depends-on",
      "display": "Value set Substance Use Disorder Long Acting Medication Administration",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1156"
    }, {
      "type": "depends-on",
      "display": "Value set Substance Use Disorder Short Acting Medication Administration",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1157"
    }, {
      "type": "depends-on",
      "display": "Value set Substance Use Disorder Long Acting Medication",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1149"
    }, {
      "type": "depends-on",
      "display": "Value set Substance Use Disorder Short Acting Medication",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1150"
    }, {
      "type": "depends-on",
      "display": "Value set Encounter Inpatient",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
    }, {
      "type": "depends-on",
      "display": "Value set Hospice Encounter",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1003"
    }, {
      "type": "depends-on",
      "display": "Value set Hospice Care Ambulatory",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1584"
    }, {
      "type": "depends-on",
      "display": "Value set Hospice Diagnosis",
      "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1165"
    } ],
    "parameter": [ {
      "name": "Measurement Period",
      "use": "in",
      "min": 0,
      "max": "1",
      "type": "Period"
    }, {
      "name": "Denominator",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Numerator 1",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Numerator 2",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Initial Population",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Denominator Exclusions",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Stratification 3",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Stratification 2",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    }, {
      "name": "Stratification 1",
      "use": "out",
      "min": 0,
      "max": "1",
      "type": "boolean"
    } ],
    "dataRequirement": [ {
      "type": "Patient",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient" ],
      "mustSupport": [ "birthDate", "birthDate.value" ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
      "mustSupport": [ "type", "status", "status.value", "period", "condition", "condition.reference", "condition.reference.value" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001"
      } ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
      "mustSupport": [ "type", "status", "status.value", "period", "condition", "condition.reference", "condition.reference.value" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1002"
      } ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
      "mustSupport": [ "type", "status", "status.value", "period", "condition", "condition.reference", "condition.reference.value" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1004"
      } ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
      "mustSupport": [ "type", "status", "status.value", "period", "condition", "condition.reference", "condition.reference.value" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1006"
      } ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
      "mustSupport": [ "type", "status", "status.value", "period", "condition", "condition.reference", "condition.reference.value" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1007"
      } ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
      "mustSupport": [ "type", "status", "status.value", "period", "condition", "condition.reference", "condition.reference.value" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1010"
      } ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
      "mustSupport": [ "type", "status", "status.value", "period", "condition", "condition.reference", "condition.reference.value" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1059"
      } ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
      "mustSupport": [ "type", "status", "status.value", "period", "condition", "condition.reference", "condition.reference.value" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1080"
      } ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
      "mustSupport": [ "type", "status", "status.value", "period", "condition", "condition.reference", "condition.reference.value" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1089"
      } ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
      "mustSupport": [ "type", "hospitalization", "hospitalization.dischargeDisposition", "period", "status", "status.value", "condition", "condition.reference", "condition.reference.value" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"
      } ]
    }, {
      "type": "Encounter",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter" ],
      "mustSupport": [ "type", "period", "status", "status.value", "condition", "condition.reference", "condition.reference.value" ],
      "codeFilter": [ {
        "path": "type",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1003"
      } ]
    }, {
      "type": "Condition",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition" ],
      "mustSupport": [ "code" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.106.12.1001"
      } ]
    }, {
      "type": "Condition",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition" ],
      "mustSupport": [ "id", "id.value", "code" ]
    }, {
      "type": "Condition",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition" ],
      "mustSupport": [ "code" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1165"
      } ]
    }, {
      "type": "Procedure",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
      "mustSupport": [ "code", "status", "status.value", "performed" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.106.12.1005"
      } ]
    }, {
      "type": "Procedure",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
      "mustSupport": [ "code", "status", "status.value", "performed" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1496"
      } ]
    }, {
      "type": "Procedure",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
      "mustSupport": [ "code", "status", "status.value", "performed" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1156"
      } ]
    }, {
      "type": "Procedure",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
      "mustSupport": [ "code", "status", "status.value", "performed" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1157"
      } ]
    }, {
      "type": "Procedure",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure" ],
      "mustSupport": [ "code", "performed", "status", "status.value" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1584"
      } ]
    }, {
      "type": "MedicationRequest",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
      "mustSupport": [ "medication", "status", "status.value", "intent", "intent.value", "authoredOn", "authoredOn.value" ],
      "codeFilter": [ {
        "path": "medication",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1149"
      } ]
    }, {
      "type": "MedicationRequest",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
      "mustSupport": [ "medication", "status", "status.value", "intent", "intent.value", "authoredOn", "authoredOn.value" ],
      "codeFilter": [ {
        "path": "medication",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1150"
      } ]
    }, {
      "type": "MedicationRequest",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest" ],
      "mustSupport": [ "medication.reference", "status", "status.value", "intent", "intent.value", "authoredOn", "authoredOn.value" ]
    }, {
      "type": "Medication",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication" ],
      "mustSupport": [ "id" ]
    }, {
      "type": "Observation",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation" ],
      "mustSupport": [ "code", "value", "effective", "status", "status.value", "category" ],
      "codeFilter": [ {
        "path": "code",
        "code": [ {
          "system": "http://loinc.org",
          "code": "45755-6",
          "display": "Hospice care [Minimum Data Set]"
        } ]
      } ]
    }, {
      "type": "ServiceRequest",
      "profile": [ "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest" ],
      "mustSupport": [ "code", "authoredOn", "authoredOn.value", "status", "status.value", "intent", "intent.value" ],
      "codeFilter": [ {
        "path": "code",
        "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1584"
      } ]
    } ]
  } ],
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-effectiveDataRequirements",
    "valueReference": {
      "reference": "#effective-data-requirements"
    }
  } ],
  "url": "https://madie.cms.gov/Measure/InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR",
  "identifier": [ {
    "use": "usual",
    "type": {
      "coding": [ {
        "system": "http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type",
        "code": "short-name"
      } ]
    },
    "system": "https://madie.cms.gov/measure/shortName",
    "value": "CMS137FHIR"
  }, {
    "use": "official",
    "type": {
      "coding": [ {
        "system": "http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type",
        "code": "version-independent"
      } ]
    },
    "system": "urn:ietf:rfc:3986",
    "value": "urn:uuid:7738a412-7fff-4276-a140-8ee4c08503a2"
  }, {
    "use": "official",
    "type": {
      "coding": [ {
        "system": "http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type",
        "code": "version-specific"
      } ]
    },
    "system": "urn:ietf:rfc:3986",
    "value": "urn:uuid:2c928084808a958901811a45ab442716"
  }, {
    "use": "official",
    "type": {
      "coding": [ {
        "system": "http://hl7.org/fhir/us/cqfmeasures/CodeSystem/identifier-type",
        "code": "publisher"
      } ]
    },
    "system": "https://madie.cms.gov/measure/cmsId",
    "value": "137FHIR",
    "assigner": {
      "display": "CMS"
    }
  } ],
  "version": "0.0.001",
  "name": "InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR",
  "title": "Initiation and Engagement of Substance Use Disorder TreatmentFHIR",
  "status": "draft",
  "experimental": false,
  "date": "2023-11-29T21:11:44+00:00",
  "publisher": "National Committee for Quality Assurance",
  "contact": [ {
    "telecom": [ {
      "system": "url",
      "value": "https://www.ncqa.org/"
    } ]
  } ],
  "description": "Percentage of patients 13 years of age and older with a new substance use disorder (SUD) episode who received the following (Two rates are reported):\n\na. Percentage of patients who initiated treatment, including either an intervention or medication for the treatment of SUD, within 14 days of the new SUD episode. \nb. Percentage of patients who engaged in ongoing treatment, including two additional interventions or short-term medications, or one long-term medication for the treatment of SUD, within 34 days of the initiation.",
  "purpose": "UNKNOWN",
  "usage": "This eCQM is a patient-based measure.\n\nThis FHIR-based measure has been derived from the QDM-based measure: CMS137v12.\n\nPlease refer to the HL7 QI-Core Implementation Guide (http://hl7.org/fhir/us/qicore/index.html) for more information on QI-Core and mapping recommendations from QDM to QI-Core 4.1.1 (http://hl7.org/fhir/us/qicore/qdm-to-qicore.html).",
  "copyright": "This Physician Performance Measure (Measure) and related data specifications are owned and were developed by the National Committee for Quality Assurance (NCQA). NCQA is not responsible for any use of the Measure. NCQA makes no representations, warranties, or endorsement about the quality of any organization or physician that uses or reports performance measures and NCQA has no liability to anyone who relies on such measures or specifications. NCQA holds a copyright in the Measure. The Measure can be reproduced and distributed, without modification, for noncommercial purposes (e.g., use by healthcare providers in connection with their practices) without obtaining approval from NCQA. Commercial use is defined as the sale, licensing, or distribution of the Measure for commercial gain, or incorporation of the Measure into a product or service that is sold, licensed or distributed for commercial gain. All commercial uses or requests for modification must be approved by NCQA and are subject to a license at the discretion of NCQA. (C) 2012-2021 National Committee for Quality Assurance. All Rights Reserved.\n\nLimited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. NCQA disclaims all liability for use or accuracy of any third party codes contained in the specifications.\n\nCPT(R) contained in the Measure specifications is copyright 2004-2021 American Medical Association. LOINC(R) copyright 2004-2021 Regenstrief Institute, Inc. This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2021 International Health Terminology Standards Development Organisation. ICD-10 copyright 2021 World Health Organization. All Rights Reserved.",
  "approvalDate": "2023-11-29",
  "lastReviewDate": "2023-11-29",
  "effectivePeriod": {
    "start": "2025-01-01",
    "end": "2025-12-31"
  },
  "author": [ {
    "name": "National Committee for Quality Assurance",
    "telecom": [ {
      "system": "url",
      "value": "https://www.ncqa.org/"
    } ]
  } ],
  "library": [ "https://madie.cms.gov/Library/InitiationandEngagementofSubstanceUseDisorderTreatmentFHIR" ],
  "disclaimer": "The performance Measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications. THE MEASURE AND SPECIFICATIONS ARE PROVIDED \"AS IS\" WITHOUT WARRANTY OF ANY KIND.\n \nDue to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].",
  "rationale": "There are more deaths, illnesses and disabilities from substance abuse than from any other preventable health condition. In 2018, 20.3 million individuals in the U.S. age 12 or older (approximately 8 percent of the population) were classified as having an SUD within the past year (Substance Abuse and Mental Health Services Administration, 2019). Despite the high prevalence of SUD in the U.S., fewer than 20 percent of individuals with SUD receive any substance use treatment and only 12 percent receive treatment in a specialty SUD program (SAMHSA, 2019).",
  "clinicalRecommendationStatement": "American Society of Addiction Medicine (2020) \n* All Food and Drug Administration approved medications for the treatment of opioid use disorder should be available to all patients. Clinicians should consider the patients preferences, past treatment history, current state of illness, and treatment setting when deciding between the use of methadone, buprenorphine, and naltrexone.\n* There is no recommended time limit for pharmacological treatment\n* Patients psychosocial needs should be assessed, and patients should be offered or referred to psychosocial treatment based on their individual needs. However, a patients decision to decline psychosocial treatment or the absence of available psychosocial treatment should not preclude or delay pharmacotherapy, with appropriate medication management. Motivational interviewing or enhancement can be used to encourage patients to engage in psychosocial treatment services appropriate for addressing individual needs.\n\nAmerican Psychiatric Association (2018)\n* Patients with alcohol use disorder should have a documented comprehensive and person-centered treatment plan that includes evidence-based nonpharmacological and pharmacological treatments. [1C]\n* Naltrexone or acamprosate should be offered to patients with moderate to severe alcohol use disorder who have a goal of reducing alcohol consumption or achieving abstinence, prefer pharmacotherapy or have not responded to nonpharmacological treatments alone, and have no contraindications to the use of these medications. [1B]\n* Disulfiram should be offered to patients with moderate to severe alcohol use disorder who have a goal of achieving abstinence, prefer disulfiram or are intolerant to or have not responded to naltrexone and acamprosate, are capable of understanding the risks of alcohol consumption while taking disulfiram, and have no contraindications to the use of this medication. [2C]\n* Topiramate or gabapentin should be offered to patients with moderate to severe alcohol use disorder who have a goal of reducing alcohol consumption or achieving abstinence, prefer topiramate or gabapentin or are intolerant to or have not responded to naltrexone and acamprosate, and have no contraindications to the use of these medications. [2C]\n\nAmerican Psychiatric Association (2006)\n* Because many substance use disorders are chronic, patients usually require long-term treatment, although the intensity and specific components of treatment may vary over time [I rating]. \n* It is important to intensify the monitoring for substance use during periods when the patient is at a high risk of relapsing, including during the early stages of treatment, times of transition to less intensive levels of care, and the first year after active treatment has ceased [I rating].\n* Outpatient treatment of substance use disorders is appropriate for patients whose clinical condition or environmental circumstances do not require a more intensive level of care [I rating]. As in other treatment settings, a comprehensive approach is optimal, using, where indicated, a variety of psychotherapeutic and pharmacological interventions along with behavioral monitoring [I rating ].\n* Disulfiram is also recommended for patients with alcohol dependence [II rating]. \n* Naltrexone, injectable naltrexone, acamprosate, a y-aminobutyric acid (GABA) are recommended for patients with alcohol dependence [I rating]. Disulfiram is also recommended for patients with alcohol dependence [II rating]. \n* Methadone and buprenorphine are recommended for patients with opioid dependence [I rating]. \n* Naltrexone is an alternative strategy [I rating].\n\nAmerican Society of Addiction Medicine (2015) \n* Methadone and buprenorphine are recommended for opioid use disorder treatment and withdrawal management.\n* Naltrexone (oral; extended-release injectable) is recommended for relapse prevention.\n\nMichigan Quality Improvement Consortium (2017)\n* Patients with substance use disorder or risky substance use: Patient Education and Brief Intervention by PCP or Trained Staff (e.g. RN, MSW)\n* If diagnosed with substance use disorder or risky substance use, initiate an intervention within 14 days.\n* Frequent follow-up is helpful to support behavior change; preferably 2 visits within 30 days.\n* Refer to a substance abuse health specialist, an addiction physician specialist, or a physician experienced in pharmacologic management of addiction.\n\nDepartment of Veterans Affairs/Department of Defense (2015)\n* Offer referral to specialty SUD care for addiction treatment if based on willingness to engage. [B]\n* For patients with moderate-severe alcohol use disorder, we recommend: Acamprosate, Disulfiram, Naltrexone- oral or extended release, or Topiramate. [A]\n* Medications should be offered in combined with addiction-focused counseling. offering one or more of the following interventions considering patient preference and provider training/competence: Behavioral Couples Therapy for alcohol use disorder, Cognitive Behavioral Therapy for substance use disorders, Community Reinforcement Approach, Motivational Enhancement Therapy, 12-Step Facilitation. [A]\n* For patients with opioid use disorder we recommend buprenorphine/naloxone or methadone in an Opioid Treatment Program. For patients for whom agonist treatment is contraindicated, unacceptable, unavailable, or discontinued, we recommend extended-release injectable naltrexone. [A]\n* For patients initiated in an intensive phase of outpatient or residential treatment, recommend ongoing systematic relapse prevention efforts or recovery support, individualized on the basis of treatment response. [A]",
  "group": [ {
    "id": "64e38a012ad653247b573ab3",
    "extension": [ {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-scoring",
      "valueCodeableConcept": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-scoring",
          "code": "proportion",
          "display": "Proportion"
        } ]
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-populationBasis",
      "valueCode": "boolean"
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-type",
      "valueCodeableConcept": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-type",
          "code": "process",
          "display": "Process"
        } ]
      }
    } ],
    "population": [ {
      "id": "2AB71D1F-3D6C-4896-A79B-DB28834F5A01",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "initial-population",
          "display": "Initial Population"
        } ]
      },
      "description": "Patients age 13 years of age and older as of the start of the measurement period who were diagnosed with a new SUD episode during a visit between January 1 and November 14 of the measurement period",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Initial Population"
      }
    }, {
      "id": "0F1B9F33-DB7A-47F3-8B0F-FFD81DAE517F",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "denominator",
          "display": "Denominator"
        } ]
      },
      "description": "Equals Initial Population",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Denominator"
      }
    }, {
      "id": "33E4E5A3-BDB4-42DB-9D81-C014D01AB16B",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "denominator-exclusion",
          "display": "Denominator Exclusion"
        } ]
      },
      "description": "Exclude patients who are in hospice care for any part of the measurement period",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Denominator Exclusions"
      }
    }, {
      "id": "A2196039-2428-4D84-9F64-A825725FA260",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "numerator",
          "display": "Numerator"
        } ]
      },
      "description": "Numerator 1: Initiation of treatment includes either an intervention or medication for the treatment of SUD within 14 days of the new SUD episode",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Numerator 1"
      }
    }, {
      "id": "a7be3393-2c36-4b03-bfea-8576c0fbf2fb",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "numerator-exclusion",
          "display": "Numerator Exclusion"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier"
      }
    }, {
      "id": "df5feacc-a819-43c1-8105-b8cf353263f2",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "denominator-exception",
          "display": "Denominator Exception"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier"
      }
    } ],
    "stratifier": [ {
      "id": "14cb5b29-3b16-45f6-adc4-c076fb6493de",
      "extension": [ {
        "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-appliesTo",
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://terminology.hl7.org/CodeSystem/measure-population",
            "code": "initial-population",
            "display": "Initial Population"
          } ]
        }
      } ],
      "description": "Patients age 13-17 at the start of the measurement period",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Stratification 1"
      }
    }, {
      "id": "a674c6ef-41d8-44a4-a560-a100fc3ecbc6",
      "extension": [ {
        "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-appliesTo",
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://terminology.hl7.org/CodeSystem/measure-population",
            "code": "initial-population",
            "display": "Initial Population"
          } ]
        }
      } ],
      "description": "Patients age 18-64 at the start of the measurement period",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Stratification 2"
      }
    }, {
      "id": "32b4a9d9-dc33-4bff-a68b-787ee473162b",
      "extension": [ {
        "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-appliesTo",
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://terminology.hl7.org/CodeSystem/measure-population",
            "code": "initial-population",
            "display": "Initial Population"
          } ]
        }
      } ],
      "description": "Patients age 65 and older at the start of the measurement period",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Stratification 3"
      }
    } ]
  }, {
    "id": "64e38a012ad653247b573ab4",
    "extension": [ {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-scoring",
      "valueCodeableConcept": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-scoring",
          "code": "proportion",
          "display": "Proportion"
        } ]
      }
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-populationBasis",
      "valueCode": "boolean"
    }, {
      "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-type",
      "valueCodeableConcept": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-type",
          "code": "process",
          "display": "Process"
        } ]
      }
    } ],
    "population": [ {
      "id": "37CC01EF-E227-4F4B-A7A8-28CD8E9BF672",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "initial-population",
          "display": "Initial Population"
        } ]
      },
      "description": "Patients age 13 years of age and older as of the start of the measurement period who were diagnosed with a new SUD episode during a visit between January 1 and November 14 of the measurement period",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Initial Population"
      }
    }, {
      "id": "1EA2FDFF-35F0-450A-9648-EC2C9B10EBD3",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "denominator",
          "display": "Denominator"
        } ]
      },
      "description": "Equals Initial Population",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Denominator"
      }
    }, {
      "id": "CEB148AB-98D6-400D-874E-668C4E24282F",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "denominator-exclusion",
          "display": "Denominator Exclusion"
        } ]
      },
      "description": "Exclude patients who are in hospice care for any part of the measurement period",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Denominator Exclusions"
      }
    }, {
      "id": "444B3FC7-026D-4491-8480-22C28A19D053",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "numerator",
          "display": "Numerator"
        } ]
      },
      "description": "Numerator 2: Engagement in ongoing SUD treatment within 34 days of initiation includes:\n\n1. A long-acting SUD medication on the day after the initiation through 34 days after the initiation of treatment\n\n2. One of the following options on the day after the initiation of treatment through 34 days after the initiation of treatment: a) two engagement visits, b) two engagement medication treatment events, c) one engagement visit and one engagement medication treatment event",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Numerator 2"
      }
    }, {
      "id": "02fd7943-6281-4f87-abdd-fdf448708648",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "numerator-exclusion",
          "display": "Numerator Exclusion"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier"
      }
    }, {
      "id": "6afb804f-c32d-49c8-8d2f-3db574b31dee",
      "code": {
        "coding": [ {
          "system": "http://terminology.hl7.org/CodeSystem/measure-population",
          "code": "denominator-exception",
          "display": "Denominator Exception"
        } ]
      },
      "criteria": {
        "language": "text/cql-identifier"
      }
    } ],
    "stratifier": [ {
      "id": "b6c71573-42ed-4305-9a39-2cdff748cf57",
      "extension": [ {
        "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-appliesTo",
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://terminology.hl7.org/CodeSystem/measure-population",
            "code": "initial-population",
            "display": "Initial Population"
          } ]
        }
      } ],
      "description": "Patients age 13-17 at the start of the measurement period",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Stratification 1"
      }
    }, {
      "id": "54a441ef-4e4d-4c50-8140-b4544d44022c",
      "extension": [ {
        "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-appliesTo",
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://terminology.hl7.org/CodeSystem/measure-population",
            "code": "initial-population",
            "display": "Initial Population"
          } ]
        }
      } ],
      "description": "Patients age 18-64 at the start of the measurement period",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Stratification 2"
      }
    }, {
      "id": "47be3929-6f47-4a4c-93d6-2323d6f6fe80",
      "extension": [ {
        "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-appliesTo",
        "valueCodeableConcept": {
          "coding": [ {
            "system": "http://terminology.hl7.org/CodeSystem/measure-population",
            "code": "initial-population",
            "display": "Initial Population"
          } ]
        }
      } ],
      "description": "Patients age 65 and older at the start of the measurement period",
      "criteria": {
        "language": "text/cql-identifier",
        "expression": "Stratification 3"
      }
    } ]
  } ]
}