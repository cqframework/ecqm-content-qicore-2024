<!DOCTYPE html>
<html>
<head>
    <style>
      body {
        background-color: #ffffff;;
        margin: 0px;
        padding: 10px;
        height: 100%;
        font-size: 1em;
      }

      p, li {
        font-size: 12px;
        line-height: 1.4em;
        font-family: verdana;
        margin: 0 0 20px 0;
        font-weight: normal;
      }

      td {
        font-size: 12px;
        line-height: 1.4em;
        font-family: verdana;
        font-weight: normal;
        padding: 3px;
        vertical-align: top;
      }

      tr {
        font-size: 12px;
        line-height: 1.4em;
        font-family: verdana;
        font-weight: normal;
        padding: 3px;
        vertical-align: top;
        text-align: left;
      }

      table.colstu td {
        border: 1px grey solid;
        border-spacing: 0;
        padding: 5px;
        border-collapse: collapse;
        background-color: #fff5e6;
      }

      table.colsd td {
        border: 1px grey solid;
        border-spacing: 0;
        padding: 5px;
        border-collapse: collapse;
        background-color: #efefef;
      }

      table.colsn td {
        border: 1px grey solid;
        border-spacing: 0;
        padding: 5px;
        border-collapse: collapse;
        background-color: #e6ffe6;
      }

      table.colse td {
        border: 1px grey solid;
        border-spacing: 0;
        padding: 5px;
        border-collapse: collapse;
        background-color: #e6e6e6;
      }

      table.colsi td {
        border: 1px grey solid;
        border-spacing: 0;
        padding: 5px;
        border-collapse: collapse;
        background-color: #ffffe6;
      }

      table.list td {
        border-top: 1px silver solid;
        border-spacing: 0;
      }

      table.bare td {
        border-spacing: 0;
      }

      ul.dict li {
        font-size: 11px;
        line-height: 1.2em;
        font-family: verdana;
        font-weight: normal;
        padding: 3px;
      }

      table.dict td {
        padding: 3px 7px 2px 7px;
        font-size: 11px;
        line-height: 1.2em;
        font-family: verdana;
        font-weight: normal;
        padding: 3px;
        vertical-align: top;
      }

      table.dict p {
        font-size: 11px;
      }

      table {
        margin-bottom: 10px;
        border-collapse: collapse;
      }

      table.codes td {
        border: 1px solid silver;
        padding: 3px 7px 2px 7px;
        font-size: 12px;
        line-height: 1.4em;
        font-family: verdana;
        font-weight: normal;
        padding: 3px;
        vertical-align: top;
      }

      table.grid {
        margin-bottom: 10px;
        border: 1px black solid;
        margin-right: auto;

      }

      table.grid th {
        border: 1px solid silver;
        padding: 3px 7px 2px 7px;
        font-size: 12px;
        line-height: 1.4em;
        font-family: verdana;
        font-weight: bold;
        padding: 3px;
        vertical-align: top;
      }

      table.grid td {
        border: 1px solid silver;
        padding: 3px 7px 2px 7px;
        font-size: 12px;
        line-height: 1.4em;
        font-family: verdana;
        font-weight: normal;
        padding: 3px;
        vertical-align: top;
      }

      ul {
        margin: 10px 0;
        padding: 0 0 0 25px;
      }

      .dense li {
        margin: 0 0 0 0;
      }

      li {
        margin: 0 0 5px 0;
      }

      h1 {
        font-size: 16px;
        margin: 0 0 4px 0;
        font-family: verdana;
        border-bottom: 1px solid #7e7e7e;
        padding-bottom: 2px;
      }

      h2 {
        font-family: verdana;
        line-height: 1.2em;
        font-size: 14px;
        margin: 0 0 3px 0;
        margin-top: 15px;
        border-bottom: 1px solid #dcdcdc;
        padding-bottom: 2px;
      }

      h3 {
        font-family: verdana;
        line-height: 1.2em;
        font-size: 12px;
        margin: 0 0 3px 0;
        margin-top: 10px;
      }

      h4 {
        font-family: verdana;
        line-height: 1.2em;
        font-size: 11px;
        margin: 0 0 3px 0;
        margin-top: 10px;
      }

      div.sidebar h2 {
        border-bottom: 1px solid #dcdcdc;
        padding-bottom: 2px;
        padding-top: 0px;
        margin-top: 0px;
        font-weight: normal;
        margin-left: 8px;
        margin-bottom: 0px;
        font-size: 12px;
      }

      div.sidebar p {
        padding-bottom: 0px;
        padding-top: 10px;
        font-weight: normal;
        margin-left: 8px;
        font-size: 12px;
        margin-bottom: 8px;
      }

      div.sidebar ul {
        list-style: none;
        padding: 0px;
        margin-left: 6px;
        font-size: 11px;
        line-height: 2.125em;
      }

      div.sidebar li {
        margin: 0px 0px 0px 6px;
        padding: 0px;
        font-size: 11px;
        line-height: 2.125em;
      }

      a {
        color: #428bca;
        text-decoration: none;
      }

      a.xmltag :visited {
        color: Navy;
      }

      a.xmltag :hover {
        color: Blue;
      }

      pre {
        display: block;
        border: 1px solid #cccccc;
        border-radius: 4px;
      }

      pre a {
        color: darkgreen;
        text-decoration: none;
        border: 0;

      }

      /* PrismJS 1.21.0
      https://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript+abap+abnf+actionscript+ada+agda+al+antlr4+apacheconf+apl+applescript+aql+arduino+arff+asciidoc+aspnet+asm6502+autohotkey+autoit+bash+basic+batch+bbcode+birb+bison+bnf+brainfuck+brightscript+bro+bsl+c+csharp+cpp+cil+clojure+cmake+coffeescript+concurnas+csp+crystal+css-extras+cypher+d+dart+dax+dhall+diff+django+dns-zone-file+docker+ebnf+editorconfig+eiffel+ejs+elixir+elm+etlua+erb+erlang+excel-formula+fsharp+factor+firestore-security-rules+flow+fortran+ftl+gml+gcode+gdscript+gedcom+gherkin+git+glsl+go+graphql+groovy+haml+handlebars+haskell+haxe+hcl+hlsl+http+hpkp+hsts+ichigojam+icon+ignore+inform7+ini+io+j+java+javadoc+javadoclike+javastacktrace+jolie+jq+jsdoc+js-extras+json+json5+jsonp+jsstacktrace+js-templates+julia+keyman+kotlin+latex+latte+less+lilypond+liquid+lisp+livescript+llvm+lolcode+lua+makefile+markdown+markup-templating+matlab+mel+mizar+mongodb+monkey+moonscript+n1ql+n4js+nand2tetris-hdl+naniscript+nasm+neon+nginx+nim+nix+nsis+objectivec+ocaml+opencl+oz+parigp+parser+pascal+pascaligo+pcaxis+peoplecode+perl+php+phpdoc+php-extras+plsql+powerquery+powershell+processing+prolog+properties+protobuf+pug+puppet+pure+purebasic+purescript+python+q+qml+qore+r+racket+jsx+tsx+reason+regex+renpy+rest+rip+roboconf+robotframework+ruby+rust+sas+sass+scss+scala+scheme+shell-session+smali+smalltalk+smarty+sml+solidity+solution-file+soy+sparql+splunk-spl+sqf+sql+stan+iecst+stylus+swift+t4-templating+t4-cs+t4-vb+tap+tcl+tt2+textile+toml+turtle+twig+typescript+typoscript+unrealscript+vala+vbnet+velocity+verilog+vhdl+vim+visual-basic+warpscript+wasm+wiki+xeora+xml-doc+xojo+xquery+yaml+yang+zig&plugins=keep-markup */
      /**
       * prism.js default theme for JavaScript, CSS and HTML
       * Based on dabblet (http://dabblet.com)
       * @author Lea Verou
       */

      code[class*="language-"],
      pre[class*="language-"] {
        color: black;
        background: none;
        text-shadow: 0 1px white;
        font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
        font-size: 0.95em;
        text-align: left;
        white-space: pre;
        word-spacing: normal;
        word-break: normal;
        word-wrap: normal;
        line-height: 1.5;

        -moz-tab-size: 4;
        -o-tab-size: 4;
        tab-size: 4;

        -webkit-hyphens: none;
        -moz-hyphens: none;
        -ms-hyphens: none;
        hyphens: none;
      }

      pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
      code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
        text-shadow: none;
        background: #b3d4fc;
      }

      pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
      code[class*="language-"]::selection, code[class*="language-"] ::selection {
        text-shadow: none;
        background: #b3d4fc;
      }

      @media print {
        code[class*="language-"],
        pre[class*="language-"] {
          text-shadow: none;
        }
      }

      /* Code blocks */
      pre[class*="language-"] {
        padding: 1em;
        margin: .5em 0;
        overflow: auto;
      }

      :not(pre) > code[class*="language-"],
      pre[class*="language-"] {
        background: #f5f2f0;
      }

      /* Inline code */
      :not(pre) > code[class*="language-"] {
        padding: .1em;
        border-radius: .3em;
        white-space: normal;
      }
    </style>
</head>
<body>
    <div xmlns="http://www.w3.org/1999/xhtml">
    <table class="grid dict">
        
            <tr>
                <th scope="row"><b>Title: </b></th>
                <td style="padding-left: 4px;">Appropriate Use of DXA Scans in Women Under 65 Years Who Do Not Meet the Risk Factor Profile for Osteoporotic FractureFHIR</td>
            </tr>
        

        

        
            <tr>
                <th scope="row"><b>Id: </b></th>
                <td style="padding-left: 4px;">AppropriateDXAScansForWomenUnder65FHIR</td>
            </tr>
        

        
            <tr>
                <th scope="row"><b>Version: </b></th>
                <td style="padding-left: 4px;">0.2.001</td>
            </tr>
        

        
            <tr>
                <th scope="row"><b>Url: </b></th>
                <td style="padding-left: 4px;">https://madie.cms.gov/Measure/AppropriateDXAScansForWomenUnder65FHIR</td>
            </tr>
        

        
            <tr>
                <th scope="row">
                    <b>
                        
                            
                                short-name identifier:
                            
                        
                    </b>
                </th>

                <td style="padding-left: 4px;">
                    
                        <p style="margin-bottom: 5px;">
                            <span>CMS249FHIR</span>
                        </p>
                    
                </td>
            </tr>
        
            <tr>
                <th scope="row">
                    <b>
                        
                            
                                version-independent identifier:
                            
                        
                    </b>
                </th>

                <td style="padding-left: 4px;">
                    
                        <p style="margin-bottom: 5px;">
                            <span>urn:uuid:bf28f544-b8f0-49fd-8a67-ceafe0f0250e</span>
                        </p>
                    
                </td>
            </tr>
        
            <tr>
                <th scope="row">
                    <b>
                        
                            
                                version-specific identifier:
                            
                        
                    </b>
                </th>

                <td style="padding-left: 4px;">
                    
                        <p style="margin-bottom: 5px;">
                            <span>urn:uuid:2d4f7526-6eff-4629-8d25-568b00177ed5</span>
                        </p>
                    
                </td>
            </tr>
        
            <tr>
                <th scope="row">
                    <b>
                        
                            
                                endorser (CMS Consensus Based Entity) identifier:
                            
                        
                    </b>
                </th>

                <td style="padding-left: 4px;">
                    
                        <p style="margin-bottom: 5px;">
                            <span>3475e</span>
                        </p>
                    
                </td>
            </tr>
        
            <tr>
                <th scope="row">
                    <b>
                        
                            
                                publisher (CMS) identifier:
                            
                        
                    </b>
                </th>

                <td style="padding-left: 4px;">
                    
                        <p style="margin-bottom: 5px;">
                            <span>249FHIR</span>
                        </p>
                    
                </td>
            </tr>
        

        
            <tr>
                <th scope="row"><b>Effective Period: </b></th>
                <td style="padding-left: 4px;">2025-01-01
                    ..2025-12-31</td>
            </tr>
        

        
            <tr>
                <th scope="row"><b>Status: </b></th>
                <td style="padding-left: 4px;">draft</td>
            </tr>
        

        

        
            <tr>
                <th scope="row"><b>Date: </b></th>
                <td style="padding-left: 4px;">2024-05-16T13:44:02+00:00</td>
            </tr>
        

        
            <tr>
                <th scope="row"><b>Publisher: </b></th>
                <td style="padding-left: 4px;">Centers for Medicare &amp; Medicaid Services (CMS)</td>
            </tr>
        

        
        <tr>
            <th scope="row"><b>Author: </b></th>
            <td style="padding-left: 4px;">National Committee for Quality Assurance</td>
        </tr>
        

        

        
            <tr>
                <th scope="row"><b>Description: </b></th>
                <td style="padding-left: 4px;">Percentage of female patients 50 to 64 years of age without select risk factors for osteoporotic fracture who received an order for a dual-energy x-ray absorptiometry (DXA) scan during the measurement period</td>
            </tr>
        

        

        

        

        

        

        
            <tr>
                <th scope="row"><b>Purpose: </b></th>
                <td style="padding-left: 4px;">UNKNOWN</td>
            </tr>
        

        
            <tr>
                <th scope="row"><b>Copyright: </b></th>
                <td style="padding-left: 4px;">This Physician Performance Measure (Measure) and related data specifications are owned and stewarded by the Centers for Medicare &amp; Medicaid Services (CMS). This measure was developed under CMS Contract No. HHSM-500-2013-13011I, Task Order HHSM-500-TO0001. Mathematica and the National Committee for Quality Assurance (NCQA) supported development of this electronic measure. NCQA is not responsible for any use of the Measure. NCQA makes no representations, warranties, or endorsement about the quality of any organization or physician that uses or reports performance measures and NCQA has no liability to anyone who relies on such measures or specifications.

Limited proprietary coding is contained in the Measure specifications for user convenience. Users of proprietary code sets should obtain all necessary licenses from the owners of the code sets. NCQA disclaims all liability for use or accuracy of any third-party codes contained in the specifications. 
 
CPT(R) codes, descriptions and other data are copyright 2024. American Medical Association. All rights reserved. CPT is a trademark of the American Medical Association. Fee schedules, relative value units, conversion factors and/or related components are not assigned by the AMA, are not part of CPT, and the AMA is not recommending their use. The AMA does not directly or indirectly practice medicine or dispense medical services. The AMA assumes no liability for data contained or not contained herein. Applicable FARS/DFARS restrictions apply to government use.

The measure specifications contain coding from LOINC(R) (http://loinc.org). The LOINC table, LOINC codes, LOINC panels and form file, LOINC linguistic variants file, LOINC/RSNA Radiology Playbook, and LOINC/IEEE Medical Device Code Mapping Table are copyright 2004-2024 Regenstrief Institute, Inc. and the Logical Observation Identifiers Names and Codes (LOINC) Committee, and are available at no cost under the license at http://loinc.org/terms-of-use.

This material contains SNOMED Clinical Terms(R) (SNOMED CT[R]) copyright 2004-2023 International Health Terminology Standards Development Organisation. 

ICD-10 copyright 2024 World Health Organization. All Rights Reserved.

The Measure uses RxNorm, a standardized nomenclature and coding for clinical drugs and drug delivery devices, which is made publicly available courtesy of the U.S. National Library of Medicine (NLM), National Institutes of Health, Department of Health and Human Services. NLM is not responsible for the Measure and does not endorse or recommend this or any other product.

“HL7” is the registered trademark of Health Level Seven International.</td>
            </tr>
        

        
            <tr>
                <th scope="row"><b>Disclaimer: </b></th>
                <td style="padding-left: 4px;">The performance Measure is not a clinical guideline and does not establish a standard of medical care, and has not been tested for all potential applications. THE MEASURE AND SPECIFICATIONS ARE PROVIDED &quot;AS IS&quot; WITHOUT WARRANTY OF ANY KIND. 

Due to technical limitations, registered trademarks are indicated by (R) or [R] and unregistered trademarks are indicated by (TM) or [TM].</td>
            </tr>
        

        

        

        

        

        

        

        

        
        <tr>
            <th scope="row"><b>Rationale: </b></th>
            <td style="padding-left: 4px;">This measure is expected to increase recording of patient risk for fracture data and decrease the amount of inappropriate DXA scans. Current osteoporosis guidelines recommend using bone measurement testing to assess osteoporosis risk in women 65 years and older. In postmenopausal women younger than age 65, guidelines recommend using a formal clinical risk assessment tool to establish a patient's risk for osteoporosis, in order to determine whether to screen a patient for osteoporosis using bone measurement testing. Clinical information, such as age, body mass index (BMI), parental hip fracture history, and alcohol use, can be used to determine a woman's fracture risk (U.S. Preventive Services Task Force [USPSTF], 2018). Additionally, there are potentially avoidable harms associated with screening for osteoporosis in general, including exposure to radiation, false positive exams, and resulting side effects from unnecessary osteoporosis medications, which add costs to an already burdened health care system (Lim, Hoeksema, &amp; Sherin, 2009).</td>
        </tr>
        

        
        <tr>
            <th scope="row"><b>Clinical recommendation statement: </b></th>
            <td style="padding-left: 4px;">USPSTF 2018:
&quot;The USPSTF recommends screening for osteoporosis with bone measurement testing to prevent osteoporotic fractures in women 65 years and older.&quot; This is a B recommendation. 

&quot;The USPSTF concludes that the current evidence is insufficient to assess the balance of benefits and harms of screening for osteoporosis to prevent osteoporotic fractures in men.&quot; This is an I statement.

&quot;The USPSTF recommends screening for osteoporosis with bone measurement testing to prevent osteoporotic fractures in postmenopausal women younger than 65 years who are at increased risk of osteoporosis, as determined by a formal clinical risk assessment tool.&quot; This is a B recommendation. 
&quot;For postmenopausal women younger than 65 years who have at least 1 risk factor, a reasonable approach to determine who should be screened with bone measurement testing is to use a clinical risk assessment tool.&quot; 

&quot;Several tools are available to assess osteoporosis risk: the Simple Calculated Osteoporosis Risk Estimate (SCORE; Merck), Osteoporosis Risk Assessment Instrument (ORAI), Osteoporosis Index of Risk (OSIRIS), and the Osteoporosis Self-Assessment Tool (OST). These tools seem to perform similarly and are moderately accurate at predicting osteoporosis. The Fracture Risk Assessment (FRAX) tool (University of Sheffield), which assesses a person's 10-year risk of fracture, is also a commonly used tool.&quot;

&quot;Because the benefits of treatment are greater in persons at higher risk of fracture, one approach is to perform bone measurement testing in postmenopausal women younger than 65 years who have a 10-year FRAX risk of major osteoporotic fracture (MOF) (without DXA) greater than that of a 65-year-old white woman without major risk factors. For example, in the United States, a 65-year-old white woman of mean height and weight without major risk factors has a 10-year FRAX risk of MOF of 8.4%.&quot;</td>
        </tr>
        

        

        
            <tr>
                <th scope="row"><b>Guidance (Usage): </b></th>
                <td style="padding-left: 4px;">Patients are excluded from the measure if they have one or more risk factors for osteoporosis, including a result indicating that the patient should be considered for bone density testing on one of the following risk assessment instruments:
- 10-year probability of major osteoporotic fracture of 8.4 percent or higher as determined by the FRAX
- ORAI score of &gt;=9
- OSIRIS score of &lt;1
- OST score of &lt;2

This eCQM is a patient-based measure.

This FHIR-based measure has been derived from the QDM-based measure:  CMS249v7.

Please refer to the HL7 QI-Core Implementation Guide (https://hl7.org/fhir/us/qicore/STU4.1.1/) for more information on QI-Core and mapping recommendations from QDM to QI-Core 4.1.1 (https://hl7.org/fhir/us/qicore/STU4.1.1/qdm-to-qicore.html).</td>
            </tr>
        

        
            
                <tr>
                    <th scope="row"><b>Population Criteria: </b></th>
                    <td style="padding-left: 4px;">
                        
                            <table class="grid-dict">
                                
                                    <tr>
                                        <th><b>66460da2a7a1805d3b737654</b></th>
                                    </tr>
                                
                                
                                    <tr>
                                        <td>Initial Population:</td>
                                        
                                            <td>Female patients ages 50 to 63 years at the start of the measurement period with an encounter during the measurement period</td>
                                        
                                    </tr>
                                
                                    <tr>
                                        <td>Denominator:</td>
                                        
                                            <td>Equals Initial Population</td>
                                        
                                    </tr>
                                
                                    <tr>
                                        <td>Denominator Exclusion:</td>
                                        
                                            <td>Exclude patients with one of the following risk factors.

Risk factors are grouped by when they occur in relation to the measurement period.

The following risk factors must be active during the measurement period:
BMI &lt;= 20 kg/m2 (must be the first BMI of the measurement period)
Alcohol consumption (&gt; two units per day (one unit is 12 oz. of beer, 4 oz. of wine, or 1 oz. of liquor))

The following risk factors may occur at any time in the patient's history prior to the start of the measurement period:
Osteoporosis
Osteopenia
Gastric bypass
Aromatase inhibitors
Documentation of history of hip fracture in parent

The following risk factors may occur at any time in the patient's history or during the measurement period:
Glucocorticoids [cumulative medication duration &gt;= 90 days]
Osteoporotic fracture
Malabsorption Syndromes: celiac disease, inflammatory bowel disease, ulcerative colitis, Crohn's disease, cystic fibrosis, malabsorption
Chronic malnutrition
Chronic liver disease
Rheumatoid arthritis
Hyperthyroidism
Type I Diabetes 
End stage renal disease
Osteogenesis imperfecta
Ankylosing spondylitis
Psoriatic arthritis
Ehlers-Danlos syndrome
Cushing's syndrome
Hyperparathyroidism
Marfan syndrome
Lupus
Chemotherapy
Multiple myeloma
Premature menopause
Double or bilateral oophorectomy
Eating disorder
Amenorrhea
Organ transplant</td>
                                        
                                    </tr>
                                
                                    <tr>
                                        <td>Numerator:</td>
                                        
                                            <td>Female patients who received an order for at least one DXA scan in the measurement period</td>
                                        
                                    </tr>
                                
                                    <tr>
                                        <td>Numerator Exclusion:</td>
                                        
                                            <td>Exclude patients with a result on one of the following tools, which indicates the patient should be considered for bone density testing, anytime in the patient’s history prior to the time of the first DXA scan during the measurement period:
FRAX[R] ten-year probability of all major osteoporosis related fracture &gt;= 8.4 percent
ORAI score of &gt;=9 
OSIRIS score of &lt;1
OST score of &lt;2</td>
                                        
                                    </tr>
                                
                                
                            </table>
                        
                    </td>
                </tr>
            
        

        

        

        

        
            <tr>
                <th scope="row"><b>Libraries: </b></th>
                <td style="padding-left: 4px;">
                    <table class="grid-dict">
                        
                            <tr>
                                <td>https://madie.cms.gov/Library/AppropriateDXAScansForWomenUnder65FHIR</td>
                            </tr>
                        
                    </table>
                </td>
            </tr>
        

        

        
            
                <tr>
                    <th scope="row"><b>Related Artifact Dependencies: </b></th>
                    <td style="padding-left: 4px;">
                        
                            <li>Library/Status|1.8.000</li>
                        
                            <li>Library/QICoreCommon|2.1.000</li>
                        
                            <li>Library/FHIRHelpers|4.4.000</li>
                        
                            <li>Library/CumulativeMedicationDuration|4.1.000</li>
                        
                            <li>http://www.ama-assn.org/go/cpt</li>
                        
                            <li>http://terminology.hl7.org/CodeSystem/observation-category</li>
                        
                            <li>http://loinc.org</li>
                        
                            <li>http://snomed.info/sct</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1051</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1025</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1023</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1008</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1089</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1080</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1038</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1049</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1050</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.196.12.1265</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1040</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.196.12.1266</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1050</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.199.12.1050</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.199.12.1036</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.199.12.1035</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1005</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.117.12.1015</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.103.12.1020</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.353</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1044</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1045</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1046</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1047</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.117.12.1009</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.117.12.1016</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1048</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.117.12.1010</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1011</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1013</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1039</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1022</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.485</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.471</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1048</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1035</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1032</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1028</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1075</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.109.12.1012</li>
                        
                            <li>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.336</li>
                        
                    </td>
                </tr>
                <tr>
                    <th scope="row"><b>Parameters:</b></th>
                    <td style="padding-left: 4px;">
                        <table class="grid-dict">
                            <tr>
                                <th><b>name</b></th>
                                <th><b>use</b></th>
                                <th><b>min</b></th>
                                <th><b>max</b></th>
                                <th><b>type</b></th>
                            </tr>
                            
                                <tr>
                                    <td>Measurement Period</td>
                                    <td>in</td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>Period</td>
                                </tr>
                            
                                <tr>
                                    <td>ErrorLevel</td>
                                    <td>in</td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>string</td>
                                </tr>
                            
                                <tr>
                                    <td>Numerator</td>
                                    <td>out</td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>boolean</td>
                                </tr>
                            
                                <tr>
                                    <td>Denominator</td>
                                    <td>out</td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>boolean</td>
                                </tr>
                            
                                <tr>
                                    <td>Initial Population</td>
                                    <td>out</td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>boolean</td>
                                </tr>
                            
                                <tr>
                                    <td>Denominator Exclusions</td>
                                    <td>out</td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>boolean</td>
                                </tr>
                            
                                <tr>
                                    <td>Numerator Exclusion</td>
                                    <td>out</td>
                                    <td>0</td>
                                    <td>1</td>
                                    <td>boolean</td>
                                </tr>
                            
                        </table>
                    </td>
                </tr>

                <tr>
                    <th scope="row"><b>DataRequirements:</b></th>
                    <td style="padding-left: 4px;">
                        <table class="grid-dict">
                            <tr>
                                <th><b>Type</b></th>
                                <th><b>Elements</b></th>
                                <th><b>Valueset Name</b></th>
                                <th><b>Valueset</b></th>
                            </tr>
                            
                                <tr>
                                    <td>Patient(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient)</td>
                                    <td>
                                        
                                            birthDate
                                        
                                            birthDate.value
                                        
                                            gender
                                        
                                            gender.value
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                    <td></td>
                                </tr>
                            
                                <tr>
                                    <td>ServiceRequest(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest)</td>
                                    <td>
                                        
                                            authoredOn
                                        
                                            status
                                        
                                            status.value
                                        
                                            intent
                                        
                                            intent.value
                                        
                                            authoredOn.value
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                    <td></td>
                                </tr>
                            
                                <tr>
                                    <td>ServiceRequest(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest)</td>
                                    <td>
                                        
                                            code
                                        
                                            authoredOn
                                        
                                            authoredOn.value
                                        
                                            status
                                        
                                            status.value
                                        
                                            intent
                                        
                                            intent.value
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 DXA (Dual energy Xray Absorptiometry) Scan
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1051</td>
                                </tr>
                            
                                <tr>
                                    <td>Encounter(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter)</td>
                                    <td>
                                        
                                            type
                                        
                                            status
                                        
                                            status.value
                                        
                                            period
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Office Visit
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1001</td>
                                </tr>
                            
                                <tr>
                                    <td>Encounter(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter)</td>
                                    <td>
                                        
                                            type
                                        
                                            status
                                        
                                            status.value
                                        
                                            period
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Preventive Care Services Established Office Visit, 18 and Up
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1025</td>
                                </tr>
                            
                                <tr>
                                    <td>Encounter(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter)</td>
                                    <td>
                                        
                                            type
                                        
                                            status
                                        
                                            status.value
                                        
                                            period
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                    <td></td>
                                </tr>
                            
                                <tr>
                                    <td>Encounter(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter)</td>
                                    <td>
                                        
                                            type
                                        
                                            status
                                        
                                            status.value
                                        
                                            period
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Preventive Care Services Initial Office Visit, 18 and Up
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1023</td>
                                </tr>
                            
                                <tr>
                                    <td>Encounter(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter)</td>
                                    <td>
                                        
                                            type
                                        
                                            status
                                        
                                            status.value
                                        
                                            period
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Outpatient Consultation
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1008</td>
                                </tr>
                            
                                <tr>
                                    <td>Encounter(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter)</td>
                                    <td>
                                        
                                            type
                                        
                                            status
                                        
                                            status.value
                                        
                                            period
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Virtual Encounter
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1089</td>
                                </tr>
                            
                                <tr>
                                    <td>Encounter(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter)</td>
                                    <td>
                                        
                                            type
                                        
                                            status
                                        
                                            status.value
                                        
                                            period
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Telephone Visits
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1080</td>
                                </tr>
                            
                                <tr>
                                    <td>Observation(http://hl7.org/fhir/StructureDefinition/bmi)</td>
                                    <td>
                                        
                                            effective
                                        
                                            value
                                        
                                            status
                                        
                                            status.value
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                    <td></td>
                                </tr>
                            
                                <tr>
                                    <td>Observation(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation)</td>
                                    <td>
                                        
                                            code
                                        
                                            effective
                                        
                                            value
                                        
                                            status
                                        
                                            status.value
                                        
                                            category
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                    <td></td>
                                </tr>
                            
                                <tr>
                                    <td>Observation(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation)</td>
                                    <td>
                                        
                                            code
                                        
                                            effective
                                        
                                            status
                                        
                                            status.value
                                        
                                            category
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 History of hip fracture in parent
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1040</td>
                                </tr>
                            
                                <tr>
                                    <td>Observation(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation)</td>
                                    <td>
                                        
                                            code
                                        
                                            value
                                        
                                            status
                                        
                                            status.value
                                        
                                            category
                                        
                                            effective
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                    <td></td>
                                </tr>
                            
                                <tr>
                                    <td>Observation(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation)</td>
                                    <td>
                                        
                                            code
                                        
                                            value
                                        
                                            status
                                        
                                            status.value
                                        
                                            category
                                        
                                            effective
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                    <td></td>
                                </tr>
                            
                                <tr>
                                    <td>Observation(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation)</td>
                                    <td>
                                        
                                            code
                                        
                                            value
                                        
                                            status
                                        
                                            status.value
                                        
                                            category
                                        
                                            effective
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                    <td></td>
                                </tr>
                            
                                <tr>
                                    <td>Observation(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation)</td>
                                    <td>
                                        
                                            code
                                        
                                            value
                                        
                                            status
                                        
                                            status.value
                                        
                                            category
                                        
                                            effective
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                    <td></td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Osteoporosis Without Current Fracture
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1038</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Osteopenia
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1049</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Osteoporosis With Current Fracture
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1050</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Malabsorption Syndromes
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.199.12.1050</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Chronic Malnutrition
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.199.12.1036</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Chronic Liver Disease
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.199.12.1035</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Rheumatoid Arthritis
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1005</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Hyperthyroidism
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.117.12.1015</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Type 1 Diabetes
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.103.12.1020</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 End Stage Renal Disease
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.353</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Osteogenesis Imperfecta
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1044</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Ankylosing Spondylitis
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1045</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Psoriatic Arthritis
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1046</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Ehlers Danlos Syndrome
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1047</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Cushings Syndrome
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.117.12.1009</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Hyperparathyroidism
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.117.12.1016</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Marfan's Syndrome
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.113.12.1048</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Lupus
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.117.12.1010</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Multiple Myeloma
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1011</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Premature Menopause
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1013</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Eating Disorders
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1039</td>
                                </tr>
                            
                                <tr>
                                    <td>Condition(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition)</td>
                                    <td>
                                        
                                            code
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Amenorrhea
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1022</td>
                                </tr>
                            
                                <tr>
                                    <td>Procedure(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure)</td>
                                    <td>
                                        
                                            code
                                        
                                            performed
                                        
                                            status
                                        
                                            status.value
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Gastric Bypass Surgery
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1050</td>
                                </tr>
                            
                                <tr>
                                    <td>Procedure(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure)</td>
                                    <td>
                                        
                                            code
                                        
                                            status
                                        
                                            status.value
                                        
                                            performed
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Bilateral Oophorectomy
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.471</td>
                                </tr>
                            
                                <tr>
                                    <td>Procedure(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure)</td>
                                    <td>
                                        
                                            code
                                        
                                            status
                                        
                                            status.value
                                        
                                            performed
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Evidence of Bilateral Oophorectomy
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1048</td>
                                </tr>
                            
                                <tr>
                                    <td>Procedure(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure)</td>
                                    <td>
                                        
                                            code
                                        
                                            status
                                        
                                            status.value
                                        
                                            performed
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Unilateral Oophorectomy Right
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1032</td>
                                </tr>
                            
                                <tr>
                                    <td>Procedure(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure)</td>
                                    <td>
                                        
                                            code
                                        
                                            bodySite
                                        
                                            status
                                        
                                            status.value
                                        
                                            performed
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Unilateral Oophorectomy, Unspecified Laterality
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1035</td>
                                </tr>
                            
                                <tr>
                                    <td>Procedure(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure)</td>
                                    <td>
                                        
                                            code
                                        
                                            status
                                        
                                            status.value
                                        
                                            performed
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Unilateral Oophorectomy Left
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1028</td>
                                </tr>
                            
                                <tr>
                                    <td>Procedure(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure)</td>
                                    <td>
                                        
                                            code
                                        
                                            status
                                        
                                            status.value
                                        
                                            performed
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Major Transplant
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1075</td>
                                </tr>
                            
                                <tr>
                                    <td>Procedure(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure)</td>
                                    <td>
                                        
                                            code
                                        
                                            status
                                        
                                            status.value
                                        
                                            performed
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Kidney Transplant
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.109.12.1012</td>
                                </tr>
                            
                                <tr>
                                    <td>Procedure(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure)</td>
                                    <td>
                                        
                                            code
                                        
                                            status
                                        
                                            status.value
                                        
                                            performed
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Bone Marrow Transplant
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.336</td>
                                </tr>
                            
                                <tr>
                                    <td>Procedure(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure)</td>
                                    <td>
                                        
                                            code
                                        
                                            status
                                        
                                            status.value
                                        
                                            performed
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Chemotherapy
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.485</td>
                                </tr>
                            
                                <tr>
                                    <td>MedicationRequest(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest)</td>
                                    <td>
                                        
                                            medication
                                        
                                            status
                                        
                                            status.value
                                        
                                            intent
                                        
                                            intent.value
                                        
                                            dosageInstruction
                                        
                                            dispenseRequest
                                        
                                            dispenseRequest.expectedSupplyDuration
                                        
                                            dispenseRequest.quantity
                                        
                                            dispenseRequest.numberOfRepeatsAllowed
                                        
                                            dispenseRequest.numberOfRepeatsAllowed.value
                                        
                                            authoredOn
                                        
                                            authoredOn.value
                                        
                                            dispenseRequest.validityPeriod
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Aromatase Inhibitors
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.196.12.1265</td>
                                </tr>
                            
                                <tr>
                                    <td>MedicationRequest(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest)</td>
                                    <td>
                                        
                                            medication
                                        
                                            status
                                        
                                            status.value
                                        
                                            intent
                                        
                                            intent.value
                                        
                                            dosageInstruction
                                        
                                            dispenseRequest
                                        
                                            dispenseRequest.expectedSupplyDuration
                                        
                                            dispenseRequest.quantity
                                        
                                            dispenseRequest.numberOfRepeatsAllowed
                                        
                                            dispenseRequest.numberOfRepeatsAllowed.value
                                        
                                            authoredOn
                                        
                                            authoredOn.value
                                        
                                            dispenseRequest.validityPeriod
                                        
                                    </td>
                                    <td>
                                        
                                            
                                                 Glucocorticoids (oral only)
                                            
                                        
                                    </td>
                                    <td>http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.196.12.1266</td>
                                </tr>
                            
                                <tr>
                                    <td>MedicationRequest(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest)</td>
                                    <td>
                                        
                                            medication.reference
                                        
                                            status
                                        
                                            status.value
                                        
                                            intent
                                        
                                            intent.value
                                        
                                            dosageInstruction
                                        
                                            dispenseRequest
                                        
                                            dispenseRequest.expectedSupplyDuration
                                        
                                            dispenseRequest.quantity
                                        
                                            dispenseRequest.numberOfRepeatsAllowed
                                        
                                            dispenseRequest.numberOfRepeatsAllowed.value
                                        
                                            authoredOn
                                        
                                            authoredOn.value
                                        
                                            dispenseRequest.validityPeriod
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                    <td></td>
                                </tr>
                            
                                <tr>
                                    <td>Medication(http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication)</td>
                                    <td>
                                        
                                            id
                                        
                                    </td>
                                    <td>
                                        
                                    </td>
                                    <td></td>
                                </tr>
                            
                        </table>
                    </td>
                </tr>

                
                    <tr>
                        <th scope="row"><b>Direct Reference Codes:</b></th>
                        <td style="padding-left: 4px;">
                            <table class="grid-dict">
                                <tr>
                                    <th><b>display</b></th>
                                    <th><b>code</b></th>
                                    <th><b>system</b></th>
                                </tr>
                                
                                    <tr>
                                        <td>Unlisted preventive medicine service</td>
                                        <td>99429</td>
                                        <td>http://www.ama-assn.org/go/cpt</td>
                                    </tr>
                                
                                    <tr>
                                        <td>survey</td>
                                        <td>survey</td>
                                        <td>http://terminology.hl7.org/CodeSystem/observation-category</td>
                                    </tr>
                                
                                    <tr>
                                        <td>Alcoholic drinks per day</td>
                                        <td>74013-4</td>
                                        <td>http://loinc.org</td>
                                    </tr>
                                
                                    <tr>
                                        <td>Right (qualifier value)</td>
                                        <td>24028007</td>
                                        <td>http://snomed.info/sct</td>
                                    </tr>
                                
                                    <tr>
                                        <td>Left (qualifier value)</td>
                                        <td>7771000</td>
                                        <td>http://snomed.info/sct</td>
                                    </tr>
                                
                                    <tr>
                                        <td>Major osteoporotic fracture 10-year probability [Likelihood] Fracture Risk Assessment</td>
                                        <td>90265-0</td>
                                        <td>http://loinc.org</td>
                                    </tr>
                                
                                    <tr>
                                        <td>Osteoporosis Risk Assessment Instrument</td>
                                        <td>98139-9</td>
                                        <td>http://loinc.org</td>
                                    </tr>
                                
                                    <tr>
                                        <td>Osteoporosis Index of Risk panel</td>
                                        <td>98133-2</td>
                                        <td>http://loinc.org</td>
                                    </tr>
                                
                                    <tr>
                                        <td>Osteoporosis Self-Assessment Tool</td>
                                        <td>98146-4</td>
                                        <td>http://loinc.org</td>
                                    </tr>
                                
                            </table>
                        </td>
                    </tr>
                

                
                <tr>
                    <th scope="row"><b>Logic Definitions:</b></th>
                    <td style="padding-left: 4px;">
                        
                        <table class="grid-dict">
                            <tr>
                                <th><b>Group</b></th>
                                <th><b>Scoring</b></th>
                                <th><b>Population Criteria</b></th>
                                <th><b>Expression</b></th>
                            </tr>
                            <tr>
                                
                                <td> 66460da2a7a1805d3b737654 </td>
                                <td>
                                    
                                        <b>Group scoring:</b>
                                        
                                            <span>  proportion </span>
                                        
                                    

                                    

                                    

                                    

                                    

                                    

                                    
                                    <tr>
                                        <th scope="row"><b>Rate Aggregation: </b></th>
                                        <td colspan="3" style="padding-left: 4px;">None</td>
                                    </tr>
                                    

                                    
                                        <tr>
                                            <th scope="row"><b>Improvement Notation: </b></th>
                                            <td style="padding-left: 4px;">
                                            
                                                
                                                
                                            
                                            </td>
                                        </tr>
                                    

                                </td>
                                
                                <tr>
                                    <td/>
                                    <td/>
                                    <td>Initial Population</td>
                                    <td>
                                        
                                            <pre><code class="language-cql">define &quot;Initial Population&quot;:
  AgeInYearsAt(date from start of &quot;Measurement Period&quot;) in Interval[50, 63]
    and Patient.gender = 'female'
    and exists &quot;Qualifying Encounter&quot;</code></pre>
                                        
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td/>
                                    <td/>
                                    <td>Denominator</td>
                                    <td>
                                        
                                            <pre><code class="language-cql">define &quot;Denominator&quot;:
  &quot;Initial Population&quot;</code></pre>
                                        
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td/>
                                    <td/>
                                    <td>Denominator Exclusion</td>
                                    <td>
                                        
                                            <pre><code class="language-cql">define &quot;Denominator Exclusions&quot;:
  &quot;Has Risk Factor Active During the Measurement Period&quot;
    or &quot;Has Risk Factor Any Time in History Prior to Measurement Period&quot;
    or &quot;Has Risk Factor Any Time in History or During Measurement Period&quot;</code></pre>
                                        
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td/>
                                    <td/>
                                    <td>Numerator</td>
                                    <td>
                                        
                                            <pre><code class="language-cql">define &quot;Numerator&quot;:
  exists &quot;DXA Scan Order During Measurement Period&quot;</code></pre>
                                        
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td/>
                                    <td/>
                                    <td>Numerator Exclusion</td>
                                    <td>
                                        
                                            <pre><code class="language-cql">define &quot;Numerator Exclusion&quot;:
  exists &quot;Osteoporosis Fracture Risk Assessment Prior to First DXA Scan&quot;</code></pre>
                                        
                                    </td>
                                </tr>
                                
                                
                            
                            </tr>
                        </table>
                

                <table class="grid-dict">
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>DXA Scan Order During Measurement Period</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;DXA Scan Order During Measurement Period&quot;:
  ( ( [ServiceRequest: &quot;DXA (Dual energy Xray Absorptiometry) Scan&quot;] ).isDiagnosticStudyOrder ( ) ) DXA
    where DXA.authoredOn.toInterval ( ) during &quot;Measurement Period&quot;
    // and DXA.doNotPerform is not true
    // https://oncprojectracking.healthit.gov/support/browse/CQLIT-447 
    
    
    sort by authoredOn asc</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Numerator</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Numerator&quot;:
  exists &quot;DXA Scan Order During Measurement Period&quot;</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Qualifying Encounter</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Qualifying Encounter&quot;:
  ( ( [Encounter: &quot;Office Visit&quot;]
      union [Encounter: &quot;Preventive Care Services Established Office Visit, 18 and Up&quot;]
      union ( [Encounter] E
          where exists ( ( E.type ) T
              where T ~ &quot;Unlisted preventive medicine service&quot;
          )
      )
      union [Encounter: &quot;Preventive Care Services Initial Office Visit, 18 and Up&quot;]
      union [Encounter: &quot;Outpatient Consultation&quot;]
      union [Encounter: &quot;Virtual Encounter&quot;]
      union [Encounter: &quot;Telephone Visits&quot;]
  ).isEncounterPerformed ( ) ) ValidEncounters
    where ValidEncounters.period.toInterval ( ) during day of &quot;Measurement Period&quot;</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Initial Population</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Initial Population&quot;:
  AgeInYearsAt(date from start of &quot;Measurement Period&quot;) in Interval[50, 63]
    and Patient.gender = 'female'
    and exists &quot;Qualifying Encounter&quot;</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Denominator</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Denominator&quot;:
  &quot;Initial Population&quot;</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>First BMI in Measurement Period</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;First BMI in Measurement Period&quot;:
  First((([&quot;observation-bmi&quot;]).isObservationBMI()) BMIRatio
      where BMIRatio.effective.toInterval() during &quot;Measurement Period&quot;
        and BMIRatio.value as Quantity is not null
      sort by start of effective.toInterval()
  )</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>First BMI in Measurement Period Less Than or Equal to 20 kg m2</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;First BMI in Measurement Period Less Than or Equal to 20 kg m2&quot;:
  &quot;First BMI in Measurement Period&quot; FirstBMI
    where FirstBMI.value as Quantity &lt;= 20 'kg/m2'</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>First Average Number of Drinks Assessments Indicating More Than Two Per Day</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;First Average Number of Drinks Assessments Indicating More Than Two Per Day&quot;:
  First((([Observation: &quot;Alcoholic drinks per day&quot;]).isAssessmentPerformed()) AverageDrinks
      where start of AverageDrinks.effective.toInterval() during &quot;Measurement Period&quot;
        and AverageDrinks.value as Quantity &gt; 2 '{drinks}/d'
      sort by start of effective.toInterval()
  )</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Has Risk Factor Active During the Measurement Period</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Has Risk Factor Active During the Measurement Period&quot;:
  &quot;First BMI in Measurement Period Less Than or Equal to 20 kg m2&quot; is not null
    or &quot;First Average Number of Drinks Assessments Indicating More Than Two Per Day&quot; is not null</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Has Risk Factor Any Time in History Prior to Measurement Period</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Has Risk Factor Any Time in History Prior to Measurement Period&quot;:
  exists ( ( [Condition: &quot;Osteoporosis Without Current Fracture&quot;] OsteoporosisDiagnosis
        where OsteoporosisDiagnosis.prevalenceInterval ( ) starts before start of &quot;Measurement Period&quot;
    )
      union ( [Condition: &quot;Osteopenia&quot;] OsteopeniaDiagnosis
          where OsteopeniaDiagnosis.prevalenceInterval ( ) starts before start of &quot;Measurement Period&quot;
      )
      union ( ( ( ( [Procedure: &quot;Gastric Bypass Surgery&quot;] ).isProcedurePerformed ( ) ) GastricBypass
            where GastricBypass.performed.toInterval ( ) ends before start of &quot;Measurement Period&quot;
        )
          union ( ( ( [MedicationRequest: &quot;Aromatase Inhibitors&quot;] ).isMedicationActive ( ) ) AromataseInhibitorActive
              where CMD.&quot;MedicationRequestPeriod&quot; ( AromataseInhibitorActive ) starts before start of &quot;Measurement Period&quot;
          )
          union ( ( ( [MedicationRequest: &quot;Aromatase Inhibitors&quot;] ).isMedicationOrder ( ) ) AromataseInhibitorOrder
              where AromataseInhibitorOrder.authoredOn.toInterval ( ) before start of &quot;Measurement Period&quot;
          )
          union ( ( [Observation: &quot;History of hip fracture in parent&quot;] ).isAssessmentPerformed ( ) ) ParentFractureHistory
            where start of ParentFractureHistory.effective.toInterval ( ) before start of &quot;Measurement Period&quot;
      )
  )</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Glucocorticoid Active Medication Days</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Glucocorticoid Active Medication Days&quot;:
  ( ( ( ( [MedicationRequest: &quot;Glucocorticoids (oral only)&quot;] ).isMedicationActive ( ) ) OralGlucocorticoid
      where ( OralGlucocorticoid ).medicationRequestPeriod ( ) starts before end of &quot;Measurement Period&quot; ) Glucocorticoid
      return ( Glucocorticoid ).medicationRequestPeriod ( )
        intersect Interval[Patient.birthDate, date from end of &quot;Measurement Period&quot;]
  ).cumulativeDuration ( )</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Has 90 or More Active Glucocorticoid Medication Days</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Has 90 or More Active Glucocorticoid Medication Days&quot;:
  &quot;Glucocorticoid Active Medication Days&quot; &gt;= 90</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Has Double or Bilateral Oophorectomy</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Has Double or Bilateral Oophorectomy&quot;:
  exists ( ( [Procedure: &quot;Bilateral Oophorectomy&quot;] ).procedureInPatientHistory ( ) )
    or exists ( ( [Procedure: &quot;Evidence of Bilateral Oophorectomy&quot;] ).procedureInPatientHistory ( ) )
    or ( exists ( ( ( [Procedure: &quot;Unilateral Oophorectomy, Unspecified Laterality&quot;] UnilateralOophorectomy
              where exists ( UnilateralOophorectomy.bodySite C
                  where C ~ &quot;Right (qualifier value)&quot;
              )
          )
            union [Procedure: &quot;Unilateral Oophorectomy Right&quot;]
        ).procedureInPatientHistory ( )
      )
        and exists ( ( ( [Procedure: &quot;Unilateral Oophorectomy, Unspecified Laterality&quot;] UnilateralOophorectomy
                where exists ( UnilateralOophorectomy.bodySite D
                    where D ~ &quot;Left (qualifier value)&quot;
                )
            )
              union [Procedure: &quot;Unilateral Oophorectomy Left&quot;]
          ).procedureInPatientHistory ( )
        )
    )</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Has Organ Transplants</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Has Organ Transplants&quot;:
  exists ( [Procedure: &quot;Major Transplant&quot;]
      union [Procedure: &quot;Kidney Transplant&quot;]
      union [Procedure: &quot;Bone Marrow Transplant&quot;]
  ).procedureInPatientHistory ( )</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Has Risk Factor Any Time in History or During Measurement Period</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Has Risk Factor Any Time in History or During Measurement Period&quot;:
  &quot;Has 90 or More Active Glucocorticoid Medication Days&quot;
    or exists ( [Condition: &quot;Osteoporosis With Current Fracture&quot;]
        union [Condition: &quot;Malabsorption Syndromes&quot;]
        union [Condition: &quot;Chronic Malnutrition&quot;]
        union [Condition: &quot;Chronic Liver Disease&quot;]
        union [Condition: &quot;Rheumatoid Arthritis&quot;]
        union [Condition: &quot;Hyperthyroidism&quot;]
        union [Condition: &quot;Type 1 Diabetes&quot;]
        union [Condition: &quot;End Stage Renal Disease&quot;]
        union [Condition: &quot;Osteogenesis Imperfecta&quot;]
        union [Condition: &quot;Ankylosing Spondylitis&quot;]
        union [Condition: &quot;Psoriatic Arthritis&quot;]
        union [Condition: &quot;Ehlers Danlos Syndrome&quot;]
        union [Condition: &quot;Cushings Syndrome&quot;]
        union [Condition: &quot;Hyperparathyroidism&quot;]
        union [Condition: &quot;Marfan's Syndrome&quot;]
        union [Condition: &quot;Lupus&quot;]
        union [Condition: &quot;Multiple Myeloma&quot;]
        union [Condition: &quot;Premature Menopause&quot;]
        union [Condition: &quot;Eating Disorders&quot;]
        union [Condition: &quot;Amenorrhea&quot;]
    ).diagnosisInPatientHistory ( )
    or exists ( [Procedure: &quot;Chemotherapy&quot;] ).procedureInPatientHistory ( )
    or &quot;Has Double or Bilateral Oophorectomy&quot;
    or &quot;Has Organ Transplants&quot;</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Denominator Exclusions</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Denominator Exclusions&quot;:
  &quot;Has Risk Factor Active During the Measurement Period&quot;
    or &quot;Has Risk Factor Any Time in History Prior to Measurement Period&quot;
    or &quot;Has Risk Factor Any Time in History or During Measurement Period&quot;</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Osteoporosis Fracture Risk Assessment Prior to First DXA Scan</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Osteoporosis Fracture Risk Assessment Prior to First DXA Scan&quot;:
  ( ( ( ( [Observation: &quot;Major osteoporotic fracture 10-year probability [Likelihood] Fracture Risk Assessment&quot;] ).isAssessmentPerformed ( ) ) FRAX
      where FRAX.value &gt;= 8.4 '%'
  )
    union ( ( ( [Observation: &quot;Osteoporosis Risk Assessment Instrument&quot;] ).isAssessmentPerformed ( ) ) ORAI
        where ORAI.value as Integer &gt;= 9
    )
    union ( ( ( [Observation: &quot;Osteoporosis Index of Risk panel&quot;] ).isAssessmentPerformed ( ) ) OSIRIS
        where OSIRIS.value as Quantity &lt; 1.0
    )
    union ( ( ( [Observation: &quot;Osteoporosis Self-Assessment Tool&quot;] ).isAssessmentPerformed ( ) ) OST
        where OST.value as Quantity &lt; 2.0
    ) ) RiskAssessment
    where start of RiskAssessment.effective.toInterval ( ) before First(&quot;DXA Scan Order During Measurement Period&quot;).authoredOn</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>Numerator Exclusion</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define &quot;Numerator Exclusion&quot;:
  exists &quot;Osteoporosis Fracture Risk Assessment Prior to First DXA Scan&quot;</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>Status</td>
                            
                            
                                <td>isDiagnosticStudyOrder</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">//Diagnostic Study, Order: active and completed only
define fluent function isDiagnosticStudyOrder(ServiceRequest List&lt;ServiceRequest&gt;):
  ServiceRequest S
    where S.status in { 'active', 'completed' }
      and S.intent = 'order'</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>QICoreCommon</td>
                            
                            
                                <td>toInterval</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">/*
@description: Normalizes a value that is a choice of timing-valued types to an equivalent interval
@comment: Normalizes a choice type of DateTime, Quanitty, Interval&lt;DateTime&gt;, or Interval&lt;Quantity&gt; types
to an equivalent interval. This selection of choice types is a superset of the majority of choice types that are used as possible
representations for timing-valued elements in QICore, allowing this function to be used across any resource.
The input can be provided as a DateTime, Quantity, Interval&lt;DateTime&gt; or Interval&lt;Quantity&gt;.
The intent of this function is to provide a clear and concise mechanism to treat single
elements that have multiple possible representations as intervals so that logic doesn't have to account
for the variability. More complex calculations (such as medication request period or dispense period
calculation) need specific guidance and consideration. That guidance may make use of this function, but
the focus of this function is on single element calculations where the semantics are unambiguous.
If the input is a DateTime, the result a DateTime Interval beginning and ending on that DateTime.
If the input is a Quantity, the quantity is expected to be a calendar-duration interpreted as an Age,
and the result is a DateTime Interval beginning on the Date the patient turned that age and ending immediately before one year later.
If the input is a DateTime Interval, the result is the input.
If the input is a Quantity Interval, the quantities are expected to be calendar-durations interpreted as an Age, and the result
is a DateTime Interval beginning on the date the patient turned the age given as the start of the quantity interval, and ending
immediately before one year later than the date the patient turned the age given as the end of the quantity interval.
If the input is a Timing, an error will be thrown indicating that Timing calculations are not implemented. Any other input will reslt in a null DateTime Interval
*/
define fluent function toInterval(choice Choice&lt;DateTime, Quantity, Interval&lt;DateTime&gt;, Interval&lt;Quantity&gt;, Timing&gt;):
  case
	  when choice is DateTime then
    	Interval[choice as DateTime, choice as DateTime]
		when choice is Interval&lt;DateTime&gt; then
  		choice as Interval&lt;DateTime&gt;
		when choice is Quantity then
		  Interval[Patient.birthDate + (choice as Quantity),
			  Patient.birthDate + (choice as Quantity) + 1 year)
		when choice is Interval&lt;Quantity&gt; then
		  Interval[Patient.birthDate + (choice.low as Quantity),
			  Patient.birthDate + (choice.high as Quantity) + 1 year)
		when choice is Timing then
      Message(null, true, 'NOT_IMPLEMENTED', 'Error', 'Calculation of an interval from a Timing value is not supported') as Interval&lt;DateTime&gt;
		else
			null as Interval&lt;DateTime&gt;
	end</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>Status</td>
                            
                            
                                <td>isEncounterPerformed</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">//Encounter, Performed
//General usage unless required otherwise by measure intent (e.g., follow-up encounters)
define fluent function isEncounterPerformed(Enc List&lt;Encounter&gt;):
  Enc E
    where E.status in {'finished', 'arrived', 'triaged', 'in-progress', 'onleave'}</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>FHIRHelpers</td>
                            
                            
                                <td>ToConcept</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">/*
@description: Converts the given FHIR [CodeableConcept](https://hl7.org/fhir/datatypes.html#CodeableConcept) value to a CQL Concept.
*/
define function ToConcept(concept FHIR.CodeableConcept):
    if concept is null then
        null
    else
        System.Concept {
            codes: concept.coding C return ToCode(C),
            display: concept.text.value
        }</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>Status</td>
                            
                            
                                <td>isObservationBMI</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define fluent function isObservationBMI(Obs List&lt;&quot;QICore.observation-bmi&quot;&gt;):
  Obs O
    where O.status in { 'final', 'amended', 'corrected' }</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>Status</td>
                            
                            
                                <td>isAssessmentPerformed</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">//This library contains functions that are based on QDM 5.6 to QICore 4.1.1 March 2023 (https://github.com/cqframework/CQL-Formatting-and-Usage-Wiki/wiki/Authoring-Patterns---QICore-v4.1.1). The functions may appear similar to some QICoreCommon functions but different in that they have constraints that are relevant for measures authored by NCQA.

//Assessment, Performed
define fluent function isAssessmentPerformed(Obs List&lt;Observation&gt;):
  Obs O
    where O.status in { 'final', 'amended', 'corrected' }
          and exists ( O.category ObservationCategory
          where ( ObservationCategory ) ~ &quot;survey&quot;
      )</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>QICoreCommon</td>
                            
                            
                                <td>prevalenceInterval</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">/*
@description: Returns an interval representing the normalized prevalence period of a given Condition.
@comment: Uses the ToInterval and ToAbatementInterval functions to determine the widest potential interval from
onset to abatement as specified in the given Condition. If the condition is active, or has an abatement date the resulting 
interval will have a closed ending boundary. Otherwise, the resulting interval will have an open ending boundary.
*/
define fluent function prevalenceInterval(condition Condition):
if condition.clinicalStatus ~ &quot;active&quot;
  or condition.clinicalStatus ~ &quot;recurrence&quot;
  or condition.clinicalStatus ~ &quot;relapse&quot; then
  Interval[start of condition.onset.toInterval(), end of condition.abatementInterval()]
else
    (end of condition.abatementInterval()) abatementDate
    return if abatementDate is null then
      Interval[start of condition.onset.toInterval(), abatementDate)
    else
      Interval[start of condition.onset.toInterval(), abatementDate]</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>Status</td>
                            
                            
                                <td>isProcedurePerformed</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">//Procedure, Performed
define fluent function isProcedurePerformed(Proc List&lt;Procedure&gt;):
  Proc P
    where P.status ~ 'completed'</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>Status</td>
                            
                            
                                <td>isMedicationActive</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">//Medication, Active
define fluent function isMedicationActive(MedicationRequest List&lt;MedicationRequest&gt;):
  MedicationRequest M
    where M.status = 'active'
      and M.intent = 'order'</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>CumulativeMedicationDuration</td>
                            
                            
                                <td>MedicationRequestPeriod</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">/*
Now that we have a ToDaily function, we can approach calculation of the
duration of medication for an order. First, consider the definitions
for each element:
* 1 and only 1 dosageInstruction
* 1 and only 1 doseAndRate
* 1 timing with 1 repeat
* frequency, frequencyMax, defaulting to 1
* period, periodUnit, defaulting to 1 'd'
* doseQuantity or doseRange
* timeOfDay
* authoredOn: The date the prescription was written
* dispenseRequest.validityPeriod: Time period supply is authorized for
* dispenseRequest.quantity: amount of medication supplied per dispense
* dispenseRequest.numberOfRepeatsAllowed: number of refills authorized
* dispenseRequest.expectedSupplyDuration: number of days supply per dispense
* dosageInstruction.timing.repeat.boundsDuration: total duration of the repeat
* dosageInstruction.timing.repeat.boundsRange: range of durations of the repeat
* dosageInstruction.timing.repeat.boundsPeriod: period bounds of the repeat
* dosageInstruction.timing.repeat.count: number of times to repeat
* dosageInstruction.timing.repeat.countMax: maximum number of times to repeat
* dosageInstruction.timing.repeat.frequency: event occurs frequency times per period
* dosageInstruction.timing.repeat.frequencyMax: event occurs up to frequencyMax times per period
* dosageInstruction.timing.repeat.period: event occurs frequency times per period
* dosageInstruction.timing.repeat.periodMax: upper limit of period
* dosageInstruction.timing.repeat.periodUnit: period duration (s | min | h | d | wk | mo | a)
* dosageInstruction.timing.repeat.timeOfDay: time of day for the event (0..*)
* dosageInstruction.timing.repeat.when: event timing (HS | WAKE | C | CM | CD | CV | AC | ACM...)
* dosageInstruction.timing.code: BID | TID | QID | AM | PM | QD | QOD...
* dosageInstruction.asNeeded
* dosageInstruction.doseAndRate.doseQuantity
* dosageInstruction.doseAndRate.doseRange
If expectedSupplyDuration is present, then the duration is
    expectedSupplyDuration * (1 + numberOfRepeatsAllowed)
If expectedSupplyDuration is not present, then it must be calculated based on the quantity, dosage, and frequency:
    (quantity / (dosage * frequency)) * (1 + numberOfRepeatsAllowed)
    dosage: Coalesce(end of doseAndRate.doseRange, doseAndRate.doseQuantity)
    frequency: Coalesce(frequencyMax, frequency)
    period: Quantity(period, periodUnit)
If expectedSupplyDuration is not present and cannot be calculated, and the boundsPeriod is present (and completely specified), we can use that directly
    dosage.timing.repeat.boundsPeriod
This calculation results in a number of days, which can then be turned into a period by anchoring that to the
start of the validityPeriod or the authoredOn:
    Interval[earliestDispensable, earliestDispensable + expectedSupplyDuration - 1]
    earliestDispensable: Coalesce(start of validityPeriod, authoredOn)
The following function illustrates this completely:
*/

/*
Calculates the Medication Period for a single MedicationRequest.
MedicationRequest instances provided to this function are expected
to conform to the [MMEMedicationRequest](http://build.fhir.org/ig/cqframework/opioid-mme-r4/StructureDefinition-mmemedicationrequest.html)
profile, which expects:
* 1 and only 1 dosageInstruction, multiple dosageInstruction elements will result in an error
* 1 and only 1 doseAndRate, multiple doseAndRate elements will result in an error
* 1 timing with 1 repeat, missing timing or repeat elements will result in a null
* frequency, frequencyMax, defaulting to 1
* period, periodUnit, defaulting to 1 'd'
* timeOfDay
* doseQuantity or doseRange, missing doseQuantity and doseRange will result in a null
Note that MedicationRequest status is not considered by this calculation, as the
list of MedicationRequest instances provided to this function should already have
considered appropriate statuses, depending on the use case, typically `completed`.
*/
define function MedicationRequestPeriod(Request &quot;MedicationRequest&quot;):
  Request R
    let
      dosage: singleton from R.dosageInstruction,
      doseAndRate: singleton from dosage.doseAndRate,
      timing: dosage.timing,
      frequency: Coalesce(timing.repeat.frequencyMax, timing.repeat.frequency),
      period: Quantity(timing.repeat.period, timing.repeat.periodUnit),
      doseRange: doseAndRate.dose,
      doseQuantity: doseAndRate.dose,
      dose: Coalesce(end of doseRange, doseQuantity),
      dosesPerDay: Coalesce(ToDaily(frequency, period), Count(timing.repeat.timeOfDay), 1.0),
      boundsPeriod: timing.repeat.bounds as Interval&lt;DateTime&gt;,
      daysSupply: (convert R.dispenseRequest.expectedSupplyDuration to days).value,
      quantity: R.dispenseRequest.quantity,
      refills: Coalesce(R.dispenseRequest.numberOfRepeatsAllowed, 0),
      startDate:
        Coalesce(
          date from start of boundsPeriod,
          date from R.authoredOn,
          date from start of R.dispenseRequest.validityPeriod
        ),
      totalDaysSupplied: Coalesce(daysSupply, quantity.value / (dose.value * dosesPerDay)) * (1 + refills)
    return
      if startDate is not null and totalDaysSupplied is not null then
        Interval[startDate, startDate + Quantity(totalDaysSupplied - 1, 'day') ]
      else if startDate is not null and boundsPeriod.&quot;high&quot; is not null then
        Interval[startDate, date from end of boundsPeriod]
      else
        null</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>CumulativeMedicationDuration</td>
                            
                            
                                <td>Quantity</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">/**********************************************************************/
/* Functions in this region are copied from opioid-mme-r4             */
/**********************************************************************/

define function Quantity(value Decimal, unit String):
  if value is not null then
    System.Quantity { value: value, unit: unit }
  else
    null</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>CumulativeMedicationDuration</td>
                            
                            
                                <td>ToDaily</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">/*
 Goal is to get to number of days
 Two broad approaches to the calculation:
  1) Based on supply and frequency, calculate the number of expected days the medication will cover/has covered
  2) Based on relevant period, determine a covered interval and calculate the length of that interval in days
This topic covers several use cases and illustrates how to calculate Cumulative
Medication Duration for each type of medication resource using the supply and
frequency approach.
*/

/*
  For the first approach, we need to get from frequency to a frequency/day
  So we define ToDaily
*/

/*
  Calculates daily frequency given frequency within a period
*/
define function ToDaily(frequency System.Integer, period System.Quantity):
  case period.unit
    when 'h' then frequency * (24.0 / period.value)
    when 'min' then frequency * (24.0 / period.value) * 60
    when 's' then frequency * (24.0 / period.value) * 60 * 60
    when 'd' then frequency * (24.0 / period.value) / 24
    when 'wk' then frequency * (24.0 / period.value) / (24 * 7)
    when 'mo' then frequency * (24.0 / period.value) / (24 * 30) /* assuming 30 days in month */
    when 'a' then frequency * (24.0 / period.value) / (24 * 365) /* assuming 365 days in year */
    when 'hour' then frequency * (24.0 / period.value)
    when 'minute' then frequency * (24.0 / period.value) * 60
    when 'second' then frequency * (24.0 / period.value) * 60 * 60
    when 'day' then frequency * (24.0 / period.value) / 24
    when 'week' then frequency * (24.0 / period.value) / (24 * 7)
    when 'month' then frequency * (24.0 / period.value) / (24 * 30) /* assuming 30 days in month */
    when 'year' then frequency * (24.0 / period.value) / (24 * 365) /* assuming 365 days in year */
    when 'hours' then frequency * (24.0 / period.value)
    when 'minutes' then frequency * (24.0 / period.value) * 60
    when 'seconds' then frequency * (24.0 / period.value) * 60 * 60
    when 'days' then frequency * (24.0 / period.value) / 24
    when 'weeks' then frequency * (24.0 / period.value) / (24 * 7)
    when 'months' then frequency * (24.0 / period.value) / (24 * 30) /* assuming 30 days in month */
    when 'years' then frequency * (24.0 / period.value) / (24 * 365) /* assuming 365 days in year */
    else Message(null, true, 'CMDLogic.ToDaily.UnknownUnit', ErrorLevel, 'Unknown unit ' &amp; period.unit)
  end</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>Status</td>
                            
                            
                                <td>isMedicationOrder</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">//Medication, Order: active and completed only
define fluent function isMedicationOrder(MedicationRequest List&lt;MedicationRequest&gt;):
  MedicationRequest M
    where M.status in { 'active', 'completed' }
      and M.intent = 'order'</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>CumulativeMedicationDuration</td>
                            
                            
                                <td>cumulativeDuration</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">/*
Now that we have functions for determining the medication period for individual
prescriptions, administrations, and dispenses, we can combine those using
an overall cumulative medication duration calculation.
There are two broad approaches to calculating cumulative duration, one that _collapses_
overlapping intervals so that calculations are not duplicated, and one that _rolls out_
overlapping intervals so that the durations are laid end-to-end.
First, we define a function that simply calculates CumulativeDuration of a set of
intervals:
*/
define fluent function cumulativeDuration(Intervals List&lt;Interval&lt;Date&gt;&gt;):
   if Intervals is not null then ( Sum((collapse Intervals per day)X
        return all(difference in days between start of X and 
          end of X
        )+ 1
    )
  ) 
    else null</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>CumulativeMedicationDuration</td>
                            
                            
                                <td>medicationRequestPeriod</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define fluent function medicationRequestPeriod(Request &quot;MedicationRequest&quot;):
  Request R
    let
      dosage: singleton from R.dosageInstruction,
      doseAndRate: singleton from dosage.doseAndRate,
      timing: dosage.timing,
      frequency: Coalesce(timing.repeat.frequencyMax, timing.repeat.frequency),
      period: Quantity(timing.repeat.period, timing.repeat.periodUnit),
      doseRange: doseAndRate.dose,
      doseQuantity: doseAndRate.dose,
      dose: Coalesce(end of doseRange, doseQuantity),
      dosesPerDay: Coalesce(ToDaily(frequency, period), Count(timing.repeat.timeOfDay), 1.0),
      boundsPeriod: timing.repeat.bounds as Interval&lt;DateTime&gt;,
      daysSupply: (convert R.dispenseRequest.expectedSupplyDuration to days).value,
      quantity: R.dispenseRequest.quantity,
      refills: Coalesce(R.dispenseRequest.numberOfRepeatsAllowed, 0),
      startDate:
        Coalesce(
          date from start of boundsPeriod,
          date from R.authoredOn,
          date from start of R.dispenseRequest.validityPeriod
        ),
      totalDaysSupplied: Coalesce(daysSupply, quantity.value / (dose.value * dosesPerDay)) * (1 + refills)
    return
      if startDate is not null and totalDaysSupplied is not null then
        Interval[startDate, startDate + Quantity(totalDaysSupplied - 1, 'day') ]
      else if startDate is not null and boundsPeriod.&quot;high&quot; is not null then
        Interval[startDate, date from end of boundsPeriod]
      else
        null</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>diagnosisInPatientHistory</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define fluent function &quot;diagnosisInPatientHistory&quot;(Condition List&lt;&quot;Condition&quot;&gt;):
  ( Condition ) Dx
    where Dx.prevalenceInterval ( ) starts on or before day of end of &quot;Measurement Period&quot;</code></pre>
                                </td>
                            
                        </tr>
                    
                        <tr>
                            <th><b>Library Name</b></th>
                            <th><b>Name</b></th>
                        </tr>
                        <tr>
                            
                                <td>AppropriateDXAScansForWomenUnder65FHIR</td>
                            
                            
                                <td>procedureInPatientHistory</td>
                            
                        </tr>
                        <tr>
                            
                                <td></td>
                                <td>
                                    <pre class="highlight language-cql"><code class="language-cql">define fluent function &quot;procedureInPatientHistory&quot;(Procedure List&lt;&quot;Procedure&quot;&gt;):
  ( ( Procedure ).isProcedurePerformed ( ) ) Proc
    where Proc.performed.toInterval ( ) ends on or before day of end of &quot;Measurement Period&quot;</code></pre>
                                </td>
                            
                        </tr>
                    
                    </table>
                </td>
            </tr>
            
        
    

    </table>
</div>
</body>
</html>